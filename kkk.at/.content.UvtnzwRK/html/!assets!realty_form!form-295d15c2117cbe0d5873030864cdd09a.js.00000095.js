/*
 * jQuery File Upload User Interface Plugin 4.4.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
/*jslint browser: true, unparam: true */
/*global jQuery, FileReader, URL, webkitURL */
function validateAddress(){var e=$("#realty_street").val().length>=0&&$("#realty_street").val().length<=100&&validatePostalcode.test($("#realty_postalcode").val())&&$("#realty_city").val().length>=1&&$("#realty_city").val().length<=50,t=new google.maps.Geocoder;return t.geocode({address:$("#realty_street").val()+" "+$("#realty_postalcode").val()+"  "+$("#realty_city").val()},function(t,n){n==google.maps.GeocoderStatus.OK&&$.each(t[0].address_components,function(t,n){n.types[0]=="country"&&(e?e&&n.short_name!="AT"?($("#realty_street, #realty_postalcode, #realty_city").addClass("error-border"),$("#address-in-austria").show(),$("#submit-address").attr("disabled","disabled"),$("#address").css("height","auto")):($("#realty_street, #realty_postalcode, #realty_city").removeClass("error-border"),$("#address-in-austria").hide(),$("#submit-address").removeAttr("disabled","disabled"),$("#address").css("height","50px")):$("#submit-address").attr("disabled","disabled"))})}),e}function validateTitle(){var e=$("#realty_title").val().length>=0;return e}function validateLivingspace(){var e=$("#realty_realty_type").val(),t=validateSize.test($("#realty_size").val())&&$("#realty_size").val()>0;if(e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)")t=t&&(validateNumberOfParkingPlaces.test($("#realty_number_parking_places").val())||$("#realty_number_parking_places").val()==""),t=t&&(validateNumberOfBathrooms.test($("#realty_number_bathrooms").val())||$("#realty_number_bathrooms").val()=="");var n=!1;return e=="WG-Zimmer"&&($(".separate-room-size-input").each(function(e){$(this).val()!=""&&$(this).val()!=0&&(n=!0),t=t&&(validateSize.test($(this).val())||$(this).val()=="")}),t=t&&n),t?$("#submit-livingspace").removeAttr("disabled"):$("#submit-livingspace").attr("disabled","disabled"),t}function validateAllCosts(){var e=$("#realty_realty_type").val(),t=validateCosts.test($("#realty_leasing_costs").val());return t=t&&(validateCosts.test($("#realty_operation_costs").val())||$("#realty_operation_costs").val()==""),t=t&&(validateCosts.test($("#realty_leasing_costs_max").val())||$("#realty_leasing_costs_max").val()==""),t=t&&(validateCosts.test($("#realty_transfer_costs").val())||$("#realty_transfer_costs").val()==""),t=t&&(validateCosts.test($("#realty_deposit_costs").val())||$("#realty_deposit_costs").val()==""),t=t&&(validateCosts.test($("#realty_cooperative_flat_costs").val())||$("#realty_cooperative_flat_costs").val()==""),t=t&&(validateCosts.test($("#realty_transfer_costs").val())||$("#realty_transfer_costs").val()==""),t=t&&(validateCosts.test($("#realty_additional_costs").val())||$("#realty_additional_costs").val()==""),t?$("#submit-costs").removeAttr("disabled"):$("#submit-costs").attr("disabled","disabled"),t}function validateAdditionalInfo(){var e=$("#realty_realty_type").val(),t=!0;return t=t&&(validateYearOfConstruction.test($("#realty_year_of_construction").val())||$("#realty_year_of_construction").val()==""),t?$("#submit-additional-info").removeAttr("disabled"):$("#submit-additional-info").attr("disabled","disabled"),t}function validateApartmentShare(){return!0}function validateContacts(){var e=!0;return $(".contact-data:visible").each(function(t){var n=$(this).find(".contact-name").val(),r=$(this).find(".contact-email").val(),i=$(this).find(".contact-phone").val(),s=$(this).find(".contact-opt-phone").val(),o=$(this).find(".contact-reachability").val();if(!(n.length>=1&&n.length<=50)||!validateContactPhone.test(i)&&i!=""||!validateContactPhone.test(s)&&s!=""||!(o.length>=1&&o.length<=100)&&o!="")e=!1;t==0&&!validateContactEmail.test($("#realty_contacts_attributes_0_email").val())&&$("#realty_contacts_attributes_0_email").val()!=""&&(e=!1)}),$(".contact-data:visible").length==$(".contact-data").length?$("#add-contact").hide():$("#add-contact").show(),e?$("#submit-contacts").removeAttr("disabled"):$("#submit-contacts").attr("disabled","disabled"),e}function validateSignupArea(){var e=!0;return $("#signup-area").length>0&&(e=e&&validateContactEmail.test($("#user_email").val()),e=e&&$("#user_password").val().length>=6&&$("#user_password").val().length<=128,$("#signup-check").is(":checked")&&(e=e&&$(".accept-terms").is(":checked"),e=e&&$("#user_password_confirmation").val().length>=6&&$("#user_password_confirmation").val().length<=128,e=e&&$("#user_password").val()==$("#user_password_confirmation").val())),e}function validateFormType(){var e=$("#realty_realty_type").val(),t=8e3,n=200,r=!1;if(e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Miete)"||e=="Haus (Kauf)"||e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)")($("#livingspace-preview").is(":visible")||$("#submit-livingspace").attr("disabled")!="disabled")&&($("#costs-preview").is(":visible")||$("#submit-costs").attr("disabled")!="disabled")&&($("#additional-info-preview").is(":visible")||$("#submit-additional-info").attr("disabled")!="disabled")&&(r=!0);else if(e=="Garage/Stellplatz"){if($("#costs-preview").is(":visible")||$("#submit-costs").attr("disabled")!="disabled")r=!0}else e=="Grundstück (Kauf)"?($("#livingspace-preview").is(":visible")||$("#submit-livingspace").attr("disabled")!="disabled")&&($("#costs-preview").is(":visible")||$("#submit-costs").attr("disabled")!="disabled")&&(r=!0):e=="WG-Zimmer (Miete)"?($("#livingspace-preview").is(":visible")||$("#submit-livingspace").attr("disabled")!="disabled")&&($("#costs-preview").is(":visible")||$("#submit-costs").attr("disabled")!="disabled")&&($("#additional-info-preview").is(":visible")||$("#submit-additional-info").attr("disabled")!="disabled")&&($("#apartment-share-preview").is(":visible")||$("#submit-apartment-share").attr("disabled")!="disabled")&&(r=!0):(e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)")&&($("#livingspace-preview").is(":visible")||$("#submit-livingspace").attr("disabled")!="disabled")&&($("#costs-preview").is(":visible")||$("#submit-costs").attr("disabled")!="disabled")&&($("#additional-info-preview").is(":visible")||$("#submit-additional-info").attr("disabled")!="disabled")&&(r=!0);return r=r&&($("#realty-type-preview").is(":visible")||$("#submit-realty-type").attr("disabled")!="disabled"),r=r&&($("#address-preview").is(":visible")||$("#submit-address").attr("disabled")!="disabled"),r=r&&($("#contacts-preview").is(":visible")||$("#submit-contacts").attr("disabled")!="disabled"),r=r&&$("#realty_title").val().length>0&&$("#realty_title").val().length<n,r=r&&getCharLength("description")<t,r||(message="Fülle alle rot/blau umrandeten Felder aus."),r}function getCharLength(e){try{return body=tinymce.get(e).getBody(),text=tinymce.trim(body.innerText||body.textContent),text.length}catch(t){}}function validatePictures(){var e=31,t=$(".image-box-small").length,n=!1;return $(".save-draft-button").removeAttr("disabled"),$(".image-box-small > .picture-preloader").length>0?(n=!1,message="Bitte warte bis all deine Bilder hochgeladen wurden."):t>e?(t-e>1?pictureText=" Bilder.":pictureText=" Bild.",message="Mehr als 31 Bilder sind leider nicht erlaubt. Bitte entferne "+(t-e)+pictureText,$(".save-draft-button").attr("disabled","disabled")):t>-1?n=!0:$("#realty_active_state").val()!="active"&&$("#realty_active_state").val()!="inactive"?message="<strong>Bitte füge Bilder hinzu!</strong>":message="Bitte füge Bilder hinzu!",n}function validateAll(){var e=validateFormType(),t=validatePictures(),n=validateSignupArea();(!e||!n)&&t&&(message="Bitte fülle alle rot/blau umrandeten Felder aus"),$("#description").hasClass("error-border")&&(message='Bitte benutz für Kontaktdaten nicht die Beschreibung, sondern die "Kontaktdaten"-Felder.'),$("#mandatory-fields-msg").html(message),e&&t&&n?($("#mandatory-fields-msg").hide(),$("#cancel-edit").show(),$("#edit-later-copy").show(),$("#submit-all").removeAttr("disabled"),$("#submit-area").addClass("validated")):($("#submit-all").attr("disabled","disabled"),$("#submit-area").removeClass("validated"),$("#edit-later-copy").hide(),$("#cancel-edit").hide(),$("#mandatory-fields-msg").show())}function makeSelection(e,t,n){if("selectionStart"in e)e.selectionStart=t,e.selectionEnd=n,e.focus();else{var r=input.createTextRange();r.moveStart("character",1),r.collapse(),r.moveEnd("character",1),r.select()}}function validateBorder(e,t){e?t.removeClass("error-border"):t.addClass("error-border")}function validateBorderStreet(e,t){e.val().length>=1&&e.val().length<=100?validateBorder(!0,e):!(e.val().length>=1&&e.val().length<=100)&&t&&validateBorder(!1,e)}function validateBorderTitle(e,t){e.val().length>=1&&e.val().length<=200?validateBorder(!0,e):!(e.val().length>=1&&e.val().length<=200)&&t&&validateBorder(!1,e)}function validateBorderPostalcode(e,t){validatePostalcode.test(e.val())?validateBorder(!0,e):!validatePostalcode.test(e.val())&&t&&validateBorder(!1,e)}function validateBorderCity(e,t){e.val().length>=1&&e.val().length<=50?validateBorder(!0,e):!(e.val().length>=1&&e.val().length<=50)&&t&&validateBorder(!1,e)}function validateBorderSize(e,t){validateSize.test(e.val())?validateBorder(!0,e):!validateSize.test(e.val())&&t&&validateBorder(!1,e)}function validateBorderLeasingCosts(e,t){validateCosts.test(e.val())?validateBorder(!0,e):!validateCosts.test(e.val())&&t&&validateBorder(!1,e)}function validateBorderRooms(e,t){validateCosts.test(e.val())?validateBorder(!0,e):!validateCosts.test(e.val())&&t&&validateBorder(!1,e)}function validateBorderYearOfConstruction(e,t){validateYearOfConstruction.test(e.val())||e.val()==""?validateBorder(!0,e):!validateYearOfConstruction.test(e.val())&&e.val()!=""&&t&&validateBorder(!1,e)}function validateBorderContactName(e,t){e.val().length>=1&&e.val().length<=50?validateBorder(!0,e):!(e.val().length>=1&&e.val().length<=50)&&t&&validateBorder(!1,e)}function validateBorderContactEmail(e,t){validateContactEmail.test(e.val())||e.val()==""?validateBorder(!0,e):!validateContactEmail.test(e.val())&&e.val()!=""&&t&&validateBorder(!1,e)}function validateBorderUserEmail(e,t){validateContactEmail.test(e.val())?validateBorder(!0,e):!validateContactEmail.test(e.val())&&t&&validateBorder(!1,e)}function validateBorderUserPassword(e,t){e.val().length>=6&&e.val().length<=128?validateBorder(!0,e):!(e.val().length>=6&&e.val().length<=128)&&t&&validateBorder(!1,e)}function validateBorderUserPasswordConfirmation(e,t){e.val().length>=6&&e.val().length<=128&&e.val()==$("#user_password").val()?validateBorder(!0,e):!(e.val().length>=6&&e.val().length<=128&&e.val()==$("#user_password").val())&&t&&validateBorder(!1,e)}function initContactValidation(){$(".contact-name").ForceValidation("",50),$(".contact-name").blur(function(e){var t=parseInt($(this).attr("id").substring(27,28));validateBorderContactName($(this),!0)}),$(".contact-phone").ForceValidation(validateContactPhoneCharacters,50),$(".contact-email").ForceValidation(validateContactEmailCharacters,50),$("#realty_contacts_attributes_0_email").blur(function(e){validateBorderContactEmail($(this),!0)}),$(".contact-opt-phone").ForceValidation(validateContactPhoneCharacters,50),$(".contact-reachability").ForceValidation("",100)}function setClientCountry(e,t){clientCountryShort=e,clientCountryLong=t}function positionImageBox(){var e,t;e=$("#title-area").offset(),$("#form-upload").css("top",parseInt(e.top)+$("#title-area").height()+20+"px")}function initFormEdit(e){changeFloorType(e),changeFormType(),showAllPreviews(),$("#realty_operation_costs").val()=="0"||$("#realty_operation_costs").val()==""?$("#realty_operation_costs").val(""):showField("operation-costs-field","#costs-link-operation-costs"),$("#realty_leasing_costs_max").val()=="0"||$("#realty_leasing_costs_max").val()==""?$("#realty_leasing_costs_max").val(""):showField("leasing-costs-max-field","#costs-link-leasing-costs-max"),$("#realty_transfer_costs").val()=="0"||$("#realty_transfer_costs").val()==""?$("#realty_transfer_costs").val(""):showField("transfer-costs-field","#costs-link-transfer"),$("#realty_deposit_costs").val()=="0"||$("#realty_deposit_costs").val()==""?$("#realty_deposit_costs").val(""):showField("deposit-costs-field","#costs-link-deposit"),$("#realty_cooperative_flat_costs").val()=="0"||$("#realty_cooperative_flat_costs").val()==""?$("#realty_cooperative_flat_costs").val(""):showField("cooperative-flat-costs-field","#costs-link-cooperative-flat"),$("#realty_additional_costs").val()=="0"||$("#realty_additional_costs").val()==""?$("#realty_additional_costs").val(""):showField("additional-costs-field","#costs-link-additional"),$("#realty_number_parking_places").val()=="0"||$("#realty_number_parking_places").val()==""?$("#realty_number_parking_places").val(""):showField("number-parking-places-field","#number-parking-places-link"),$("#realty_number_bathrooms").val()=="0"||$("#realty_number_bathrooms").val()==""?$("#realty_number_bathrooms").val(""):showField("number-bathrooms-field","#number-bathrooms-link"),$("#realty_year_of_construction").val()!=""&&showField("year-of-construction-additional-info-field","#additional-info-link-year-of-construction"),validateAddress(),validateTitle(),validateLivingspace(),validateAllCosts(),validateAdditionalInfo(),validateApartmentShare(),validateContacts(),validateAll()}function initFormPending(e){changeFormType(),changeFloorType(e),$("#realty_operation_costs").val()=="0"||$("#realty_operation_costs").val()==""?$("#realty_operation_costs").val(""):showField("operation-costs-field","#costs-link-operation-costs"),$("#realty_leasing_costs_max").val()=="0"||$("#realty_leasing_costs_max").val()==""?$("#realty_leasing_costs_max").val(""):showField("leasing-costs-max-field","#costs-link-leasing-costs-max"),$("#realty_transfer_costs").val()=="0"||$("#realty_transfer_costs").val()==""?$("#realty_transfer_costs").val(""):showField("transfer-costs-field","#costs-link-transfer"),$("#realty_deposit_costs").val()=="0"||$("#realty_deposit_costs").val()==""?$("#realty_deposit_costs").val(""):showField("deposit-costs-field","#costs-link-deposit"),$("#realty_cooperative_flat_costs").val()=="0"||$("#realty_cooperative_flat_costs").val()==""?$("#realty_cooperative_flat_costs").val(""):showField("cooperative-flat-costs-field","#costs-link-cooperative-flat"),$("#realty_additional_costs").val()=="0"||$("#realty_additional_costs").val()==""?$("#realty_additional_costs").val(""):showField("additional-costs-field","#costs-link-additional"),$("#realty_number_parking_places").val()=="0"||$("#realty_number_parking_places").val()==""?$("#realty_number_parking_places").val(""):showField("number-parking-places-field","#number-parking-places-link"),$("#realty_number_bathrooms").val()=="0"||$("#realty_number_bathrooms").val()==""?$("#realty_number_bathrooms").val(""):showField("number-bathrooms-field","#number-bathrooms-link"),$("#realty_year_of_construction").val()!=""&&showField("year-of-construction-additional-info-field","#additional-info-link-year-of-construction"),expand("address"),expand("realty-type"),expand("livingspace"),expand("costs"),expand("additional-info"),expand("apartment-share"),expand("contacts"),previewContacts(),validateBorderTitle($("#realty_title"),!0)}function initFormNew(){$.fancybox({width:"100px",height:"100px",autoSize:!1,transitionIn:"fade",transitionOut:"fade",closeBtn:!1,keys:{close:[null]},helpers:{overlay:{closeClick:!1}},href:"#form-layover"}),$("#realty_leasing_costs").val(""),$("#realty_leasing_costs_max").val(""),$("#realty_operation_costs").val(""),$("#realty_transfer_costs").val(""),$("#realty_deposit_costs").val(""),$("#realty_cooperative_flat_costs").val(""),$("#realty_additional_costs").val(""),$("#realty_number_parking_places").val(""),$("#realty_number_bathrooms").val(""),$("#realty_floor_type").val("Obergeschoss"),$("#realty_condition_bezugsfertig").attr("checked","checked")}function changeFormType(){var e=$("#realty_realty_type").val();$("#realty-type-start").hide(),$("#apartment-share-box").hide(),$("#living-space-box").show(),$("#costs-box").show(),$("#additional-info-box").show(),$("#description-examples").text("Ausstattung, Möbliert, Lage, Verkehrsanbindung, Heizungsart, usw."),$("#livingspace-start-label").text("Wohnfläche*"),$("#livingspace").css("border-radius","0px 0px 0px 0px"),$("#livingspace-preview").css("border-radius","0px 0px 0px 0px"),$("#livingspace-preview").css("border-top","1px solid #F0E6D7"),$("#livingspace-start").css("border-radius","0px 0px 0px 0px"),$("#livingspace-start").css("border-top","1px solid #F0E6D7"),$("#costs").css("border-radius","0px 0px 0px 0px"),$("#costs-preview").css("border-radius","0px 0px 0px 0px"),$("#costs-preview").css("border-bottom","none"),$("#costs-start").css("border-radius","0px 0px 0px 0px"),$("#costs-start").css("border-bottom","none"),$("#number-parking-places-link").parent().hide(),$("#number-parking-places-link").hide(),$("#number-parking-places-field").hide(),$("#livingspace-checkboxes").show(),$("#separate-rooms").hide(),$("#realty_laundry").parent().show(),$("#realty_balcony").parent().show(),$("#realty_terrace").parent().show(),$("#realty_bicycle_storage").parent().show(),$("#realty_basement").parent().show(),$("#realty_garden").parent().show(),$("#realty_toilet_exists").parent().hide(),$("#realty_parking_place").parent().show(),$("#realty_parking_place").next().text("Parkplatz"),$("#realty_garage").parent().show(),$("#realty_air_conditioning").parent().show(),$("#realty_accessible").parent().show(),$("#livingspace").find(".info-label.size").text("Wohnfläche*"),$("#livingspace-subtext").text("Gesamte Wohnfläche*"),$("#additional-info-rooms-label").parents(".block").show(),$("#realty_leasing_costs").prev().hide(),$("#leasing-costs-max-field").hide(),$("#costs-link-leasing-costs-max").hide(),$("#info-label-leasing-costs").text("Miete"),$("#info-label-leasing-costs").show(),$("#operation-costs-text-label").html("Monatliche Fixkosten (Brutto)"),$("#operation-costs-text-label").show(),$("#info-label-operation-costs").text("Betriebskosten"),$("#variable-costs-text-label").show(),$("#costs-link-operation-costs").show(),$("#realty_operation_costs").parent().show(),$("#costs-link-transfer").show(),$("#costs-link-transfer").parent().show(),$("#costs-link-deposit").show(),$("#costs-link-deposit").parent().show(),$("#costs-link-cooperative-flat").show(),$("#costs-link-cooperative-flat").parent().show(),$("#costs-link-additional").show(),$("#costs-link-additional").parent().show(),$("#link-hider").show(),changeCurrency(),$("#realty_pets_not_allowed").parent().show(),$("#additional-info-start").html("<span>Aufteilung, Stockwerk, Zustand</span>"),$("#number-bathrooms-link").hide(),$("#number-bathrooms-field").hide(),$("#realty_washing_machine").parent().hide(),$("#realty_dishwasher").parent().hide(),$("#livingspace").find(".info-label.size").text("Wohnfläche*"),$("#livingspace-start-label").text("Wohnfläche*"),$("#livingspace-subtext").show(),$(".smoking-option-box").hide(),$("#additional-info-rooms-label").text("Zimmer"),$("#additional-info-checkboxes").parent().show(),$("#realty_apartment_share_capable").parent().show(),$("#realty_condition_erstbezug_neu").parent().show(),$("#realty_condition_erstbezug_nach_renovierung").parent().show(),$("#realty_condition_renovierung_notwendig").parent().show(),$("#realty_condition_beziehbar_ab").parent().hide(),$("#additional-info-rooms-subtext").text("Schlaf- und Wohnräume"),$("#additional-info-rooms-subtext").show(),$("#realty_studio").parent().hide(),$("#realty_equipment").parent().hide(),$("#realty_heated").parent().hide(),$("#realty_acoustic_isolation").parent().hide(),$("#realty_own_access").parent().hide(),$("#realty_elevator").parent().show(),$("#realty_condition_bezugsfertig").next().text("Bezugsfertig"),$("#realty_condition_beziehbar_ab").next().text("Beziehbar ab..."),$("#additional-info-link-year-of-construction").parent().show(),e!="WG-Zimmer (Miete)"&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&$("#realty_condition_beziehbar_ab").attr("checked")=="checked"&&($("#realty_condition_bezugsfertig").attr("checked","checked"),$("#realty_ready_for_occupancy_month").hide()),(e=="WG-Zimmer (Miete)"||e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)")&&$("#realty_condition_beziehbar_ab").attr("checked")!="checked"&&$("#realty_condition_bezugsfertig").attr("checked","checked"),e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Kauf)"?(e=="Haus (Kauf)"&&$("#realty_elevator").parent().hide(),$("#info-label-leasing-costs").text("Kaufpreis"),$("#link-hider").hide(),$("#number-parking-places-link").hide(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#variable-costs-text-label").show(),$("#realty_pets_not_allowed").parent().hide(),$("#operation-costs-text-label").hide(),$("#realty_air_conditioning").parent().hide(),$("#realty_additional_costs").val()==0?($("#costs-link-additional").show(),$("#additional-costs-field").hide()):($("#costs-link-additional").hide(),$("#additional-costs-field").show())):e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"?(e=="Haus (Miete)"&&$("#realty_elevator").parent().hide(),$("#realty_operation_costs").val()==0?($("#costs-link-operation-costs").show(),$("#operation-costs-field").hide()):($("#costs-link-operation-costs").hide(),$("#operation-costs-field").show()),$("#realty_deposit_costs").val()==0?($("#costs-link-deposit").show(),$("#deposit-costs-field").hide()):($("#costs-link-deposit").hide(),$("#deposit-costs-field").show()),$("#realty_transfer_costs").val()==0?($("#costs-link-transfer").show(),$("#transfer-costs-field").hide()):($("#costs-link-transfer").hide(),$("#transfer-costs-field").show()),$("#realty_cooperative_flat_costs").val()==0?($("#costs-link-cooperative-flat").show(),$("#cooperative-flat-costs-field").hide()):($("#costs-link-cooperative-flat").hide(),$("#cooperative-flat-costs-field").show()),$("#realty_additional_costs").val()==0?($("#costs-link-additional").show(),$("#additional-costs-field").hide()):($("#costs-link-additional").hide(),$("#additional-costs-field").show()),$("#realty_air_conditioning").parent().hide(),$("#number-parking-places-link").hide()):e=="Garage/Stellplatz"?($("#living-space-box").hide(),$("#additional-info-box").hide(),$("#costs-link-deposit").hide(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#description-examples").text("Lage, Verkehrsanbindung, usw."),$("#costs-link-cooperative-flat").hide(),$("#variable-costs-text-label").hide(),$("#costs-link-additional").hide(),$("#costs-link-additional").parent().hide(),$("#costs-preview").css("border-radius","0px 0px 4px 4px"),$("#costs-preview").css("border","1px solid #F0E6D7"),$("#costs-start").css("border-radius","0px 0px 4px 4px"),$("#costs-start").css("border","1px solid #F0E6D7"),$("#costs").css("border-radius","0px 0px 4px 4px"),$("#realty_transfer_costs").val()==0?($("#costs-link-transfer").show(),$("#transfer-costs-field").hide()):($("#costs-link-transfer").hide(),$("#transfer-costs-field").show())):e=="Grundstück (Kauf)"?($("#description-examples").text("Lage, Anschlüsse, Bauordnung, Verkehrsanbindung, geeignet für…"),$("#livingspace-checkboxes").hide(),$("#livingspace").find(".info-label.size").text("Grundstücksfläche"),$("#livingspace-start-label").text("Grundstücksfläche"),$("#additional-info-rooms-label").parents(".block").hide(),$("#livingspace-subtext").text("Grundfläche*"),$("#info-label-leasing-costs").text("Kaufpreis"),$("#additional-info-box").hide(),$("#costs-link-transfer").hide(),$("#costs-link-deposit").hide(),$("#costs-link-cooperative-flat").hide(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#variable-costs-text-label").hide(),$("#operation-costs-text-label").hide(),$("#link-hider").hide(),$("#number-parking-places-link").hide(),$("#costs-link-additional").hide(),$("#costs-link-additional").parent().hide(),$("#realty_operation_costs").parent().hide(),$("#costs-preview").css("border-radius","0px 0px 4px 4px"),$("#costs-preview").css("border","1px solid #F0E6D7"),$("#costs-start").css("border-radius","0px 0px 4px 4px"),$("#costs-start").css("border","1px solid #F0E6D7"),$("#costs").css("border-radius","0px 0px 4px 4px")):e=="Gewerbeimmobilie (Miete)"?($("#livingspace").find(".info-label.size").text("Gewerbeimmobilie"),$("#livingspace-start-label").text("Gewerbeimmobilie"),$("#costs-link-cooperative-flat").hide(),$("#number-parking-places-link").show(),$("#number-bathrooms-link").show(),$("#realty_laundry").parent().hide(),$("#realty_parking_place").parent().hide(),$("#realty_garage").parent().hide(),$("#realty_air_conditioning").parent().show(),$("#realty_accessible").parent().show(),$("#number-parking-places-link").parent().show(),$("#realty_operation_costs").val()==0?($("#costs-link-operation-costs").show(),$("#operation-costs-field").hide()):($("#costs-link-operation-costs").hide(),$("#operation-costs-field").show()),$("#realty_number_bathrooms").val()==0?($("#number-bathrooms-link").show(),$("#number-bathrooms-field").hide()):($("#number-bathrooms-link").hide(),$("#number-bathrooms-field").show()),$("#realty_number_parking_places").val()==0?($("#number-parking-places-link").show(),$("#number-parking-places-field").hide()):($("#number-parking-places-link").hide(),$("#number-parking-places-field").show()),$("#realty_additional_costs").val()==0?($("#costs-link-additional").show(),$("#additional-costs-field").hide()):($("#costs-link-additional").hide(),$("#additional-costs-field").show()),$("#realty_deposit_costs").val()==0?($("#costs-link-deposit").show(),$("#deposit-costs-field").hide()):($("#costs-link-deposit").hide(),$("#deposit-costs-field").show()),$("#realty_transfer_costs").val()==0?($("#costs-link-transfer").show(),$("#transfer-costs-field").hide()):($("#costs-link-transfer").hide(),$("#transfer-costs-field").show()),$("#livingspace-subtext").hide(),$("#additional-info-rooms-label").text("Räume"),$("#additional-info-rooms-subtext").hide(),$("#realty_bathroom_separate").parent().hide(),$("#realty_apartment_share_capable").parent().hide(),$("#realty_pets_not_allowed").parent().hide()):e=="Gewerbeimmobilie (Kauf)"?($("#livingspace").find(".info-label.size").text("Gewerbeimmobilie"),$("#livingspace-start-label").text("Gewerbeimmobilie"),$("#info-label-leasing-costs").text("Kaufpreis"),$("#link-hider").hide(),$("#number-parking-places-link").hide(),$("#realty_operation_costs").parent().hide(),$("#variable-costs-text-label").show(),$("#realty_pets_not_allowed").parent().hide(),$("#operation-costs-text-label").hide(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#number-parking-places-link").show(),$("#number-bathrooms-link").show(),$("#realty_laundry").parent().hide(),$("#realty_parking_place").parent().hide(),$("#realty_garage").parent().hide(),$("#realty_air_conditioning").parent().show(),$("#realty_accessible").parent().show(),$("#number-parking-places-link").parent().show(),$("#realty_number_bathrooms").val()==0?($("#number-bathrooms-link").show(),$("#number-bathrooms-field").hide()):($("#number-bathrooms-link").hide(),$("#number-bathrooms-field").show()),$("#realty_number_parking_places").val()==0?($("#number-parking-places-link").show(),$("#number-parking-places-field").hide()):($("#number-parking-places-link").hide(),$("#number-parking-places-field").show()),$("#realty_additional_costs").val()==0?($("#costs-link-additional").show(),$("#additional-costs-field").hide()):($("#costs-link-additional").hide(),$("#additional-costs-field").show()),$("#realty_deposit_costs").val()==0?($("#costs-link-deposit").show(),$("#deposit-costs-field").hide()):($("#costs-link-deposit").hide(),$("#deposit-costs-field").show()),$("#realty_transfer_costs").val()==0?($("#costs-link-transfer").show(),$("#transfer-costs-field").hide()):($("#costs-link-transfer").hide(),$("#transfer-costs-field").show()),$("#livingspace-subtext").hide(),$("#additional-info-rooms-label").text("Räume"),$("#additional-info-rooms-subtext").hide(),$("#realty_bathroom_separate").parent().hide(),$("#realty_apartment_share_capable").parent().hide(),$("#realty_pets_not_allowed").parent().hide()):e=="WG-Zimmer (Miete)"?($("#apartment-share-box").show(),$("#description-examples").text("Mitbewohner, Ausstattung, Lage, Verkehrsanbindung, usw."),$("#realty_air_conditioning").parent().hide(),$("#realty_washing_machine").parent().show(),$("#realty_dishwasher").parent().show(),$("#number-parking-places-link").hide(),$("#separate-rooms").show(),$("#separate-rooms-box").children().show(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#costs-link-additional").hide(),$("#additional-costs-field").parent().hide(),$(".smoking-option-box").show(),$("#operation-costs-text-label").text("Monatliche Fixkosten pro Zimmer*"),$("#info-label-operation-costs").text("Nebenkosten"),$("#info-label-leasing-costs").text(""),$("#realty_leasing_costs_max").val()==0?($("#costs-link-leasing-costs-max").show(),$("#leasing-costs-max-field").hide()):($("#costs-link-leasing-costs-max").hide(),$("#leasing-costs-max-field").show(),$("#realty_leasing_costs").prev().show(),$("#info-label-leasing-costs").hide()),$("#link-hider").hide(),$("#additional-info-rooms-subtext").html("Anzahl Schlaf- und Wohnräume<br /><span>Gesamte Wohnung</span>"),$("#variable-costs-text-label").hide(),$("#costs-link-cooperative-flat").hide(),$("#costs-link-cooperative").parent().hide(),$("#costs-link-transfer").hide(),$("#costs-link-deposit").hide(),$("#realty_apartment_share_capable").parent().hide(),$("#realty_condition_erstbezug_neu").parent().hide(),$("#realty_condition_erstbezug_nach_renovierung").parent().hide(),$("#realty_condition_renovierung_notwendig").parent().hide(),$("#realty_condition_beziehbar_ab").parent().show(),$("#apartment-share-preview").hide(),$("#apartment-share").hide(),$("#livingspace").css("border-radius","0px 0px 0px 0px"),$("#livingspace-preview").css("border-radius","0px 0px 0px 0px"),$("#livingspace-preview").css("border-top","none"),$("#livingspace-start").css("border-radius","0px 0px 0px 0px"),$("#livingspace-start").css("border-top","none")):e=="Sonstiges (Miete)"?($("#description-examples").text("Lage, Ausstattung, Verkehrsanbindung, usw."),$("#livingspace-subtext").text("Fläche*"),$("#livingspace-start-label").text("Fläche"),$("#additional-info-rooms-label").parents(".block").hide(),$("#additional-info-checkboxes").parent().hide(),$("#livingspace-checkboxes").hide(),$("#operation-costs-text-label").hide(),$("#costs-link-operation-costs").hide(),$("#realty_balcony").parent().hide(),$("#realty_terrace").parent().hide(),$("#realty_basement").parent().hide(),$("#realty_bicycle_storage").parent().hide(),$("#realty_garden").parent().hide(),$("#realty_laundry").parent().hide(),$("#realty_garage").parent().hide(),$("#realty_accessible").parent().hide(),$("#realty_air_conditioning").parent().hide(),$("#realty_parking_place").parent().hide(),$("#realty_toilet_exists").parent().hide(),$("#realty_deposit_costs").val()==0?($("#costs-link-deposit").show(),$("#deposit-costs-field").hide()):($("#costs-link-deposit").hide(),$("#deposit-costs-field").show()),$("#realty_transfer_costs").val()==0?($("#costs-link-transfer").show(),$("#transfer-costs-field").hide()):($("#costs-link-transfer").hide(),$("#transfer-costs-field").show()),$("#costs-link-cooperative-flat").hide(),$("#variable-costs-text-label").hide(),$("#costs-link-additional").parent().hide(),$("#realty_operation_costs").parent().hide(),$("#realty_bathroom_separate").parent().hide(),$("#realty_apartment_share_capable").parent().hide(),$("#realty_pets_not_allowed").parent().hide(),$("#realty_elevator").parent().hide(),$("#additional-info-start").html("<span>Ausstattung, Stockwerk, Zustand</span>"),$("#additional-info-link-year-of-construction").parent().hide(),$("#realty_condition_erstbezug_neu").parent().hide(),$("#realty_condition_erstbezug_nach_renovierung").parent().hide(),$("#realty_condition_renovierung_notwendig").parent().hide(),$("#realty_condition_beziehbar_ab").parent().show(),$("#realty_condition_bezugsfertig").next().text("Ab sofort benutzbar"),$("#realty_condition_beziehbar_ab").next().text("Benutzbar ab..."),$("#realty_floor_type").val("Untergeschoss"),$("#floor-field").hide()):e=="Sonstiges (Kauf)"&&($("#description-examples").text("Lage, Ausstattung, Verkehrsanbindung, usw."),$("#livingspace-subtext").text("Fläche*"),$("#livingspace-start-label").text("Fläche"),$("#additional-info-rooms-label").parents(".block"
).hide(),$("#additional-info-checkboxes").parent().hide(),$("#livingspace-checkboxes").hide(),$("#operation-costs-text-label").hide(),$("#costs-link-operation-costs").hide(),$("#realty_balcony").parent().hide(),$("#realty_terrace").parent().hide(),$("#realty_basement").parent().hide(),$("#realty_bicycle_storage").parent().hide(),$("#realty_garden").parent().hide(),$("#realty_laundry").parent().hide(),$("#realty_garage").parent().hide(),$("#realty_accessible").parent().hide(),$("#realty_air_conditioning").parent().hide(),$("#realty_parking_place").parent().hide(),$("#realty_toilet_exists").parent().hide(),$("#info-label-leasing-costs").text("Kaufpreis"),$("#link-hider").hide(),$("#number-parking-places-link").hide(),$("#costs-link-operation-costs").hide(),$("#realty_operation_costs").parent().hide(),$("#variable-costs-text-label").show(),$("#realty_pets_not_allowed").parent().hide(),$("#operation-costs-text-label").hide(),$("#realty_air_conditioning").parent().hide(),$("#realty_additional_costs").val()==0?($("#costs-link-additional").show(),$("#additional-costs-field").hide()):($("#costs-link-additional").hide(),$("#additional-costs-field").show()),$("#realty_bathroom_separate").parent().hide(),$("#realty_apartment_share_capable").parent().hide(),$("#realty_pets_not_allowed").parent().hide(),$("#realty_elevator").parent().hide(),$("#additional-info-start").html("<span>Ausstattung, Stockwerk, Zustand</span>"),$("#additional-info-link-year-of-construction").parent().hide(),$("#realty_condition_erstbezug_neu").parent().hide(),$("#realty_condition_erstbezug_nach_renovierung").parent().hide(),$("#realty_condition_renovierung_notwendig").parent().hide(),$("#realty_condition_beziehbar_ab").parent().show(),$("#realty_condition_bezugsfertig").next().text("Ab sofort benutzbar"),$("#realty_condition_beziehbar_ab").next().text("Benutzbar ab..."),$("#realty_floor_type").val("Untergeschoss"),$("#floor-field").hide()),e=="Haus (Miete)"||e=="Haus (Kauf)"||e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)"?$("#realty_floor_type").parent().parent().hide():$("#realty_floor_type").parent().parent().show(),e=="Haus (Miete)"||e=="Haus (Kauf)"||e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"?$("#info-label-apartment-share-capable").text("Geeignet für Familien"):$("#info-label-apartment-share-capable").text("Geeignet für Wohngemeinschaft");switch(e){case"Wohnung (Miete)":$("#description-headline-type").text("diese Wohnung (Miete)");break;case"Neubauwohnung (Miete)":$("#description-headline-type").text("diese Neubauwohnung zur Miete");break;case"Wohnung (Kauf)":$("#description-headline-type").text("diese Wohnung (Kauf)");break;case"Neubauwohnung (Kauf)":$("#description-headline-type").text("dieses Neubauwohnung zum Kauf");break;case"Haus (Miete)":$("#description-headline-type").text("dieses Haus (Miete)");break;case"Haus (Kauf)":$("#description-headline-type").text("dieses Haus (Kauf)");break;case"WG-Zimmer (Miete)":$("#description-headline-type").text("dieses WG-Zimmer (Miete)");break;case"Gewerbeimmobilie (Miete)":$("#description-headline-type").text("diese Gewerbeimmobilie zur Miete");break;case"Gewerbeimmobilie (Kauf)":$("#description-headline-type").text("diese Gewerbeimmobilie zum Kauf");break;case"Garage/Stellplatz":$("#description-headline-type").text("diese Garage/Stellplatz");break;case"Grundstück (Kauf)":$("#description-headline-type").text("diesen Grundstück (Kauf)");break;case"Sonstiges (Miete)":$("#description-headline-type").text("dieses Angebot zur Miete");break;case"Sonstiges (Kauf)":$("#description-headline-type").text("dieses Angebot zum Kauf")}$("#apartment-share-start").is(":hidden")&&$("#submit-all").is(":visible")&&expand("apartment-share",!1),$("#livingspace-start").is(":hidden")&&$("#submit-all").is(":visible")?expand("livingspace",!1):$("#livingspace").hide(),$("#costs-start").is(":hidden")&&$("#submit-all").is(":visible")&&expand("costs",!1),$("#additional-info-start").is(":hidden")&&$("#submit-all").is(":visible")?expand("additional-info",!1):($("#additional-info").hide(),$("#additional-info-preview").hide()),validateAll(),$.cookie("form_redirect",e,{path:"/"})}function previewRealtyType(){$("#realty-type-expr").text($("#realty_realty_type option:selected").text()),$("#realty-type").hide(),$("#realty-type-preview").show(),validateAll()}function changeCountry(e){e.find("option:selected").text()=="Schweiz"?$("#country-expression").text("in der"):$("#country-expression").text("in"),e.find("option:selected").text()=="Anderes Land"&&($("#country-select-collapsed").hide(),$("#country-select-expanded").show())}function previewAddress(){if(!validateAddress())return;$("#address").toggle(),$("#realty_street").val($("#realty_street").val().charAt(0).toUpperCase()+$("#realty_street").val().slice(1)),$("#realty_city").val($("#realty_city").val().charAt(0).toUpperCase()+$("#realty_city").val().slice(1)),$("#realty_street").val()==""?$("#address-preview-data").text($("#realty_postalcode").val()+" "+$("#realty_city").val()):$("#address-preview-data").text($("#realty_street").val()+", "+$("#realty_postalcode").val()+" "+$("#realty_city").val()),$("#address-preview").toggle(),validateAll(),positionImageBox()}function previewLivingspace(){if(!validateLivingspace())return;var e=$("#realty_realty_type").val(),t="";t=$("#realty_size").val()+" m<sup>2</sup> ";if($("#realty_rooms").val()!="")t+='<span class="divider"> | </span>'+$("#realty_rooms").val()+" ",e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)"?t+="Räume":t+="Zimmer";else if(e=="Grundstück (Kauf)")t+='<span class="info-label">Grundstücksfläche</span>';else if(e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)")t+='<span class="info-label">Fläche</span>';$("#livingspace-preview").find(".info-value").html(t);var n="";$("#realty_toilet_exists").is(":checked")&&e=="Sonstiges (Miete)"&&e=="Sonstiges (Kauf)"&&(n+="Toilette, "),$("#realty_balcony").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Balkon, "),$("#realty_basement").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Keller, "),$("#realty_terrace").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Terrasse, "),$("#realty_parking_place").is(":checked")&&e!="Gewerbeimmobilie (Miete)"&&e!="Gewerbeimmobilie (Kauf)"&&(n+="Parkplatz, "),$("#realty_garage").is(":checked")&&e!="Gewerbeimmobilie (Miete)"&&e!="Gewerbeimmobilie (Kauf)"&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Garage, "),$("#realty_laundry").is(":checked")&&e!="Gewerbeimmobilie (Miete)"&&e!="Gewerbeimmobilie (Kauf)"&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Waschküche, "),$("#realty_air_conditioning").is(":checked")&&(e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)")&&(n+="Klimaanlage, "),$("#realty_accessible").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Barrierefrei, "),$("#realty_bicycle_storage").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Fahrradraum, "),$("#realty_garden").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&(n+="Garten, "),(e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)")&&$("#realty_number_parking_places").val()>0?n+="Mind. "+$("#realty_number_parking_places").val()+" Parkflächen vorhanden, ":e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)"?($("#number-parking-places-field").hide(),$("#number-parking-places-link").show()):($("#number-parking-places-field").hide(),$("#number-parking-places-link").hide()),(e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)")&&$("#realty_number_bathrooms").val()>0?($("#realty_number_bathrooms").val()==1?n+=$("#realty_number_bathrooms").val()+" WC vorhanden, ":n+=$("#realty_number_bathrooms").val()+" WCs vorhanden, ",$("#number-bathrooms-field").show(),$("#number-bathrooms-link").hide()):e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)"?($("#number-bathrooms-field").hide(),$("#number-bathrooms-link").show()):($("#number-bathrooms-field").hide(),$("#number-bathrooms-link").hide()),n!=""&&e!="Garage/Stellplatz"&&e!="Grundstück (Kauf)"?(n=n.substr(0,n.length-2),$("#additional-areas-preview").show()):$("#additional-areas-preview").hide(),$("#livingspace-preview").find(".info-details.free-rooms").empty(),$("#livingspace-preview").find(".info-details.free-rooms").hide(),e=="WG-Zimmer (Miete)"&&($("#livingspace-preview").find(".info-details.free-rooms").show(),$(".separate-room-size-input").each(function(e){($(this).val()==""||$(this).val()==0)&&$(this).parent().remove()}),$(".separate-room-size-input").each(function(e){$("#livingspace-preview").find(".info-details.free-rooms").append('<p><span style="font-weight: bold;">'+$(this).val()+" m<sup>2</sup></span>"+" Zimmer zu vergeben</p>")})),e=="Grundstück (Kauf)"&&(n=""),n==""?$("#livingspace-preview").find(".info-details-plus").hide():$("#livingspace-preview").find(".info-details-plus").show(),$("#preview-data-details").text(n),$("#livingspace").hide(animationSpeed),$("#livingspace-preview").show(animationSpeed),validateAll()}function addRoom(e){$("#separate-rooms-link").hide(),$("#add-separate-room-link").show(),$("#separate-rooms-box").append('<div class="clearfix room-block"><h4 class="living-space-edit-enum"></h4><input type="text" class="details-input separate-room-size-input" style="width: 40px;" /><div class="label-wrap"><p class="info-value"><span id="preview-data-size"></span> m<sup>2</sup></p></div><a class="delete-btn delete-room" style="margin-top:11px;" href="javascript:void(0);" onclick="removeRoom($(this));"></a></div>'),$("#separate-rooms-box .room-block").find(".delete-room").each(function(e){$(this).show()}),$("#separate-rooms-box .room-block").first().find(".details-input").removeClass("required"),$("#separate-rooms-box .room-block").last().find("input").focus(),$(".separate-room-size-input").ForceValidation(validateSizeCharacters,3),$("#separate-rooms-box").children().size()==11&&$("#add-separate-room-link").hide()}function removeRoom(e){e.parent().fadeOut(100,function(){$(this).remove(),$("#separate-rooms-box .room-block").size()==1&&($("#separate-rooms-box .room-block").first().find(".delete-room").hide(),$("#separate-rooms-box .room-block").first().find(".details-input").addClass("required"))})}function changeCurrency(){var e="$",t=$("#realty_currency").val();t=="EUR"&&(e="€"),t=="CHF"&&(e="Fr."),$("#costs").find(".info-value").each(function(t){$(this).html($(this).html().replace(/€/g,e)),$(this).html($(this).html().replace(/Fr\./g,e)),$(this).html($(this).html().replace(/\$/g,e))}),$("#realty_currency").val(t)}function previewCosts(){if(!validateAllCosts())return;var e=$("#realty_realty_type").val(),t="$";$("#realty_currency option:selected").text()=="Euro"&&(t="€"),$("#realty_currency option:selected").text()=="Schweizer-Franken"&&(t="Fr."),$("#preview-leasingcosts").parent().parent().show(),e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Kauf)"||e=="Grundstück (Kauf)"||e=="Gewerbeimmobilie (Kauf)"?$("#preview-monthly-sum-label").text("Kaufpreis"):e=="WG-Zimmer (Miete)"?$("#preview-monthly-sum-label").text("pro Zimmer"):($("#preview-monthly-sum-label").text("Monatliche Fixkosten"),$("#preview-leasing-costs-label").text("Miete: ")),$(".info-details.intended-costs").hide(),(e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="Gewerbeimmobilie (Miete)")&&$(".info-details.intended-costs").show(),e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Kauf)"||e=="Grundstück (Kauf)"||e=="Gewerbeimmobilie (Kauf)"||e=="Garage/Stellplatz"||e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)"?$("#preview-monthly-sum").text(currency(parseInt($("#realty_leasing_costs").val()))+" "+t):e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="Gewerbeimmobilie (Miete)"?$("#realty_operation_costs").val()!=""&&$("#realty_operation_costs").val()!="0"?$("#preview-monthly-sum").text(currency(parseInt($("#realty_leasing_costs").val())+parseInt($("#realty_operation_costs").val()))+" "+t):$("#preview-monthly-sum").text(currency(parseInt($("#realty_leasing_costs").val()))+" "+t):e=="WG-Zimmer (Miete)"&&($("#realty_leasing_costs_max").val()!=""&&$("#realty_leasing_costs_max").val()!="0"?$("#preview-monthly-sum").text(currency(parseInt($("#realty_leasing_costs").val()))+" - "+currency(parseInt($("#realty_leasing_costs_max").val()))+" "+t):$("#preview-monthly-sum").text(currency(parseInt($("#realty_leasing_costs").val()))+" "+t)),e=="WG-Zimmer (Miete)"&&($("#realty_leasing_costs_max").val()==0||$("#realty_leasing_costs_max").val()=="")&&($("#leasing-costs-max-field").hide(),$("#costs-link-leasing-costs-max").show(),$("#realty_leasing_costs").prev().hide(),$("#info-label-leasing-costs").hide()),$("#info-details-plus-container").hide(),e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="Gewerbeimmobilie (Miete)"||e=="Sonstiges (Miete)"?($("#realty_leasing_costs").val()>0?($("#preview-leasingcosts").text(currency($("#realty_leasing_costs").val())+" "+t),$("#preview-leasingcosts").parent().show()):$("#preview-leasingcosts").parent().hide(),$("#realty_operation_costs").val()>0?($("#preview-operationcosts").text(currency($("#realty_operation_costs").val())+" "+t),$("#preview-operationcosts").parent().show()):($("#preview-operationcosts").parent().hide(),$("#operation-costs-field").hide(),$("#costs-link-operation-costs").show()),$("#realty_transfer_costs").val()>0?($("#preview-transfercosts").text(currency($("#realty_transfer_costs").val())+" "+t+" Ablöse"),$("#info-details-plus-transfer").show(),$("#info-details-plus-container").show()):($("#preview-transfercosts").text(""),$("#transfer-costs-field").hide(),$("#costs-link-transfer").show()),$("#realty_deposit_costs").val()>0?($("#preview-depositcosts").text(currency($("#realty_deposit_costs").val())+" "+t+" Kaution"),$("#info-details-plus-deposit").show(),$("#info-details-plus-container").show()):($("#preview-depositcosts").text(""),$("#deposit-costs-field").hide(),$("#costs-link-deposit").show()),$("#realty_cooperative_flat_costs").val()>0&&e!="Gewerbeimmobilie (Miete)"&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"?($("#preview-cooperativeflatcosts").text(currency($("#realty_cooperative_flat_costs").val())+" "+t+" Genossenschaft"),$("#info-details-plus-cooperative-flat").show(),$("#info-details-plus-container").show()):($("#preview-cooperativeflatcosts").text(""),$("#cooperative-flat-costs-field").hide(),e!="Gewerbeimmobilie (Miete)"&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&$("#costs-link-cooperative-flat").show())):($("#preview-leasingcosts").parent().hide(),$("#preview-operationcosts").parent().hide(),$(".preview-hider").hide()),$("#realty_additional_costs").val()>0&&e!="WG-Zimmer (Miete)"&&e!="Garage/Stellplatz"&&e!="Grundstück (Kauf)"?($("#preview-additionalcosts").text(currency($("#realty_additional_costs").val())+" "+t+" Strom + Heizk. / Monat"),$("#info-details-plus-additional").show(),$("#info-details-plus-container").show()):($("#preview-additionalcosts").text(""),$("#additional-costs-field").hide(),$("#info-details-plus-additional").hide(),$("#costs-link-additional").show()),e=="Garage/Stellplatz"&&($("#costs-link-additional").hide(),$("#realty_transfer_costs").val()>0?($("#preview-transfercosts").text(currency($("#realty_transfer_costs").val())+" "+t+" Ablöse"),$("#info-details-plus-transfer").show(),$("#info-details-plus-container").show()):($("#preview-transfercosts").text(""),$("#transfer-costs-field").hide(),$("#costs-link-transfer").show())),e=="WG-Zimmer (Miete)"&&($("#preview-leasingcosts").parent().parent().hide(),$("#preview-operationcosts").parent().hide()),(e=="Grundstück (Kauf)"||e=="Garage/Stellplatz"||e=="WG-Zimmer (Miete)")&&$("#costs-link-additional").hide(),$("#costs").hide(animationSpeed),$("#costs-preview").show(animationSpeed),validateAll()}function previewAdditionalInfo(){if(!validateAdditionalInfo())return;var e=$("#realty_realty_type").val(),t="";(e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Kauf)"||e=="WG-Zimmer (Miete)")&&$("#realty_bathroom_separate").is(":checked")&&(t+=", Bad und WC getrennt begehbar"),(e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Haus (Kauf)")&&$("#realty_apartment_share_capable").is(":checked")&&(t+=", "+$("#info-label-apartment-share-capable").text()),(e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Haus (Miete)"||e=="WG-Zimmer (Miete)")&&$("#realty_pets_not_allowed").is(":checked")&&(t+=", Haustiere nicht erwünscht"),e=="WG-Zimmer (Miete)"&&($("#realty_washing_machine").is(":checked")&&(t+=", Waschmaschine vorhanden"),$("#realty_dishwasher").is(":checked")&&(t+=", Geschirrspüler vorhanden"));if(e=="WG-Zimmer (Miete)"){var n=$("#smoking_option_type option:selected").text();$("#preview-smoking-option").parent().show(),n=="Rauchen erlaubt"?$("#preview-smoking-option").text("Rauchen erlaubt"):n=="Rauchen nicht erwünscht"?$("#preview-smoking-option").text("Rauchen nicht erwünscht"):n=="Rauchen nur im eigenen Zimmer"?$("#preview-smoking-option").text("Rauchen nur im eigenen Zimmer"):$("#preview-smoking-option").parent().hide()}else $("#preview-smoking-option").parent().hide();e=="Wohnung (Miete)"||e=="Neubauwohnung (Miete)"||e=="Wohnung (Kauf)"||e=="Neubauwohnung (Kauf)"||e=="Gewerbeimmobilie (Miete)"||e=="Gewerbeimmobilie (Kauf)"||e=="WG-Zimmer (Miete)"||e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)"?($("#realty_floor_type").val()=="Untergeschoss"||$("#realty_floor_type").val()=="Erdgeschoss"||$("#realty_floor_type").val()=="Dachgeschoss"&&$("#realty_floor").val()==""?($("#preview-floor").text(""),$("#preview-floortype").text($("#realty_floor_type").val())):$("#realty_floor_type").val()!="Obergeschoss"||$("#realty_floor").val()!=""?($("#preview-floor").text($("#realty_floor").val()+". "),$("#preview-floortype").text($("#realty_floor_type").val())):($("#preview-floor").text(""),$("#preview-floortype").text("")),$("#realty_elevator").is(":checked")&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"&&$("#preview-elevator").text(", Aufzug vorhanden"),$("#preview-floor").show(),$("#preview-floortype").show(),$("#preview-elevator").show()):($("#preview-floor").hide(),$("#preview-floortype").hide(),$("#preview-elevator").hide()),$("#realty_year_of_construction").val()>0&&e!="Sonstiges (Miete)"&&e!="Sonstiges (Kauf)"?($("#preview-year-of-construction").text("Baujahr "+$("#realty_year_of_construction").val()),$("#preview-year-of-construction").parent().show()):($("#preview-year-of-construction").text(""),$("#year-of-construction-additional-info-field").hide(),$("#additional-info-link-year-of-construction").show()),$("#realty_condition_bezugsfertig").is(":checked")?$("#preview-condition").text($("#realty_condition_bezugsfertig").val()):$("#realty_condition_erstbezug_nach_renovierung").is(":checked")?$("#preview-condition").text($("#realty_condition_erstbezug_nach_renovierung").val()):$("#realty_condition_erstbezug_neu").is(":checked")?$("#preview-condition").text($("#realty_condition_erstbezug_neu").val()):$("#preview-condition").text($("#realty_condition_renovierung_notwendig").val()),e=="WG-Zimmer (Miete)"&&$("#realty_condition_beziehbar_ab").is(":checked")&&$("#preview-condition").text("Ab "+$("#realty_ready_for_occupancy_month option:selected").text()+" beziehbar"),(e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)")&&$("#realty_condition_bezugsfertig").is(":checked")&&$("#preview-condition").text("Ab sofort benutzbar"),(e=="Sonstiges (Miete)"||e=="Sonstiges (Kauf)")&&$("#realty_condition_beziehbar_ab").is(":checked")&&$("#preview-condition").text("Ab "+$("#realty_ready_for_occupancy_month option:selected").text()+" benutzbar"),$("#preview-info-stuff").text(t.substr(2)),$("#additional-info").hide(animationSpeed),$("#additional-info-preview").show(animationSpeed),validateAll()}function previewApartmentShare(){if(!validateApartmentShare())return;var e=$("#realty_realty_type").val(),t=0,n=0,r=0,i=0,s=0;$("#apartment-share").find(".existing select option:selected").each(function(e){switch($(this).text()){case"männlich":t++;break;case"weiblich":n++}}),$("#apartment-share").find(".wanted select option:selected").each(function(e){switch($(this).text()){case"männlich":r++;break;case"weiblich":i++;break;case"männlich oder weiblich":s++}});var o=t+n,u=r+i+s;$("#apartment-share-preview").find(".head .info-value").text(o+u+"er WG");var a=$("#apartment-share-preview").find(".info-details-shared-apartment .symbols");a.empty();for(var f=0;f<t;f++)a.append('<span class="preview-existing-roommate-male"></span>');for(var f=0;f<n;f++)a.append('<span class="preview-existing-roommate-female"></span>');for(var f=0;f<r;f++)a.append('<span class="preview-roommate-male"></span>');for(var f=0;f<i;f++)a.append('<span class="preview-roommate-female"></span>');for(var f=0;f<s;f++)a.append('<span class="preview-roommate-unisex"></span>');$("#apartment-share-preview").find(".info-details-shared-apartment .value-existing-roommates").text(o+" Mitbewohner vorhanden"),$("#apartment-share-preview").find(".info-details-shared-apartment .value-roommates").text(u+" Mitbewohner gesucht"),$("#apartment-share").hide(animationSpeed),$("#apartment-share-preview").show(animationSpeed),validateAll()}function removeFlatMate(e,t){t=="wanted"&&$("#apartment-share").find(".wanted").size()-1==1&&$("#apartment-share").find(".wanted .delete-roommate").hide(),t=="existing"&&$("#apartment-share").find(".existing").size()-1==1&&$("#apartment-share").find(".existing .delete-roommate").hide(),e.parent().fadeOut(200,function(){$(this).remove(),t=="wanted"&&$("#apartment-share").find(".add-flat-mate-wanted").parent().show(),t=="existing"&&$("#apartment-share").find(".add-flat-mate-existing").parent().show()})}function addFlatMate(e,t){var n="";if(t=="wanted"){n=$(".wanted").last().find("select option:selected").text();var r='<div class="block flatmates clearfix wanted"><select class="select-flatmate-wanted"><option value="dontcare"';n=="männlich oder weiblich"&&(r+=" selected"),r+='>männlich oder weiblich</option><option value="male"',n=="männlich"&&(r+=" selected"),r+='>männlich</option><option value="female"',n=="weiblich"&&(r+=" selected"),r+='>weiblich</option></select><a class="delete-btn delete-roommate" href="javascript:void(0);" onclick="removeFlatMate($(this),\'wanted\');"></a></div>',$(".wanted").last().after(r),$("#apartment-share").find(".wanted .delete-roommate").show(),$("#apartment-share").find(".wanted").size()==11&&e.parent().hide(),$(".wanted").last().find("select").focus()}if(t=="existing"){n=$(".existing").last().find("select option:selected").text();var r='<div class="block flatmates clearfix existing"><select class="select-flatmate-existing"><option value="male"';n=="männlich"&&(r+=" selected"),r+='>männlich</option><option value="female"',n=="weiblich"&&(r+=" selected"),r+='>weiblich</option></select><a class="delete-btn delete-roommate" href="javascript:void(0);" onclick="removeFlatMate($(this),\'existing\');"></a></div>',$(".existing").last().after(r),$("#apartment-share").find(".existing .delete-roommate").show(),$("#apartment-share").find(".existing").size()==11&&e.parent().hide(),$(".existing").last().find("select").focus()}}function previewContacts(){if(!validateContacts())return;$("#contact-data-all").html("");var e=[];$.each($(".contact-data"),function(t){if($("#realty_contacts_attributes_"+t+"_name").val()=="")return!0;var n='<div class="contact-info clearfix"><p class="contact-name-preview">'+$("#realty_contacts_attributes_"+t+"_name").val()+"</p>";t==0&&$("#realty_contacts_attributes_"+t+"_email").val()!=""&&(n+='<p class="contact-email-preview">'+$("#realty_contacts_attributes_"+t+"_email").val()+"</p>"),n+='<p class="contact-phone-preview">'+$("#realty_contacts_attributes_"+t+"_phone").val()+"</p>",$("#realty_contacts_attributes_"+t+"_opt_phone").val()!=""&&(n+='<p class="contact-phone-preview">'+$("#realty_contacts_attributes_"+t+"_opt_phone").val()+"</p>"),$("#realty_contacts_attributes_"+t+"_reachability").val()!=""&&(n+='<p class="contact-reachability-preview">'+$("#realty_contacts_attributes_"+t+"_reachability").val()+"</p>"),$("#realty_has_public_contacts").is(":checked")?n+='<p class="contact-public-contacts-preview">Kontaktdaten werden öffentlich angezeigt.</p>':n+='<p class="contact-public-contacts-preview">Kontaktdaten werden nicht öffentlich angezeigt.</p>',n+="</div>",e[$("#realty_contacts_attributes_"+t+"_position").val()]=n}),$.each(e,function(t){$("#contact-data-all").append(e[t])}),$("#contacts").hide(animationSpeed),$("#contacts-preview").show(animationSpeed),validateAll()}function setContacts(){$.each($(".contact-data"),function(e){($("#realty_contacts_attributes_"+e+"_name").val()!=""||e==0)&&$(this).show()}),$("#realty_contacts_attributes_0_name").val()!=""&&($("#contacts-start").click(),$("#submit-contacts").click())}function showField(e,t){$(t).hide(),$("#"+e).slideToggle("fast");if(e.substring(0,15)=="opt-phone-field")var n="opt-phone-field";else if(e.substring(0,18)=="reachability-field")var n="reachability-field";else var n=e;e=="leasing-costs-max-field"&&($("#realty_leasing_costs").prev().show(),$("#info-label-leasing-costs").hide());switch(n){case"number-parking-places-field":$("#realty_number_parking_places").select();break;case"operation-costs-field":$("#realty_operation_costs").select();break;case"leasing-costs-max-field":$("#realty_leasing_costs_max").select();break;case"transfer-costs-field":$("#realty_transfer_costs").select();break;case"deposit-costs-field":$("#realty_deposit_costs").select();break;case"cooperative-flat-costs-field":$("#realty_cooperative_flat_costs").select();break;case"additional-costs-field":$("#realty_additional_costs").select();break;case"year-of-construction-additional-info-field":$("#realty_year_of_construction").select();break;case"opt-phone-field":$("#"+e).find(".contact-opt-phone").select();break;case"reachability-field":$("#"+e).find(".contact-reachability").select();break;case"number-bathrooms-field":$("#realty_number_bathrooms").select()}}function collapseField(e){$(e).parent().parent().fadeOut(100,function(){$(e).parent().parent().find("input").val(""),validateAdditionalInfo(),$(e).parent().parent().prev().show()}),$(e).parent().parent().attr("id")=="leasing-costs-max-field"&&$("#realty_leasing_costs").prev().hide(),$(e).parent().parent().attr("id")=="year-of-construction-additional-info-field"&&$("#realty_year_of_construction").removeClass("error-border")}function addContact(){$.each($(".contact-data"),function(e){if($(this).is(":hidden"))return $(".contact-data:eq("+e+")").show(animationSpeed,function(){$(this).find(".contact-name").select(),$(this).find(".contact-opt-phone").val()==""&&($(this).find(".opt-phone-field").hide(),$(this).find(".add-opt-phone").parent().show()),$(this).find(".contact-reachability").val()==""&&($(this).find(".reachability-field").hide(),$(this).find(".add-reachability").parent().show()),validateContacts()}),!1}),validateAll()}function removeContact(e){$("#realty_contacts_attributes_"+e+"_position").parent().hide(animationSpeed,function(){$("#contacts-container").append('<div class="contact-data clearfix" style="width:517px; display:none;">'+$(this).html()+"</div>"),$(this).remove(),$("#contacts-container").children().last().children().find("input").val(""),$("#contacts-container").children().last().children().find("input").jLabel({yShift:20}),$("#contacts-container").children().last().find("input").removeClass("error-border"),initContactValidation(),$.each($(".contact-data"),function(e){$(this).find(".contact-position").val(e)}),validateContacts(),validateAll()})}function showAllPreviews(){previewRealtyType(),previewAddress(),previewLivingspace(),previewCosts(),previewAdditionalInfo(),previewApartmentShare(),previewContacts(),$("#address-start").hide(),$("#livingspace-start").hide(),$("#costs-start").hide(),$("#apartment-share-start").hide(),$("#additional-info-start").hide(),$("#contacts-start").hide(),$("#address").hide(),$("#livingspace").hide(),$("#costs").hide(),$("#apartment-share").hide(),$("#additional-info").hide(),$("#contacts").hide()}function changeFloorType(e){$("#realty_floor_type option[value='"+e+"']").attr("selected",!0),$("#realty_floor_type").val()=="Untergeschoss"||$("#realty_floor_type").val()=="Erdgeschoss"?$("#floor-field").hide():$("#floor-field").show(),validateAdditionalInfo()?$("#submit-additional-info").removeAttr("disabled"):$("#submit-additional-info").attr("disabled","disabled"),validateAll()}function expand(e,t){return t==null&&(t=!0),e=="address"?expandAnimSpeed=0:expandAnimSpeed=animationSpeed,$("#"+e+"-start").is(":visible")&&($("#realty-type").is(":visible")&&previewRealtyType(),$("#address").is(":visible")&&e!="address"&&previewAddress(),$("#apartment-share").is(":visible")&&e!="apartment-share"&&previewApartmentShare(),$("#livingspace").is(":visible")&&e!="livingspace"&&previewLivingspace(),$("#costs").is(":visible")&&e!="costs"&&previewCosts(),$("#additional-info").is(":visible")&&e!="additional-info"&&previewAdditionalInfo(),$("#contacts").is(":visible")&&e!="contacts"&&previewContacts(),e=="livingspace"&&$("#realty_realty_type").val()=="WG-Zimmer (Miete)"&&$(".flatmates.wanted").each(function(e){if($(".flatmates.wanted").length==e+1||$(".flatmates.wanted").length<=$(".separate-room-size-input").length)return!1;addRoom($("#separate-rooms-box").next())})),e=="apartment-share"&&validateApartmentShare(),e=="livingspace"&&validateLivingspace(),e=="costs"&&validateAllCosts(),e=="additional-info"&&validateAdditionalInfo(),$("#"+e+"-start").hide(expandAnimSpeed),$("#"+e+"-preview").hide(expandAnimSpeed),$("#realty_contacts_attributes_2_name").val()!=""&&$("#add-contact").hide(),$.each($(".contact-data"),function(e){$(this).find(".contact-opt-phone").val()==""?($(this).find(".opt-phone-field").hide(),$(this).find(".add-opt-phone").parent().show()):($(this).find(".opt-phone-field").show(),$(this).find(".add-opt-phone").parent().hide()),$(this).find(".contact-reachability").val()==""?($(this).find(".reachability-field").hide(),$(this).find(".add-reachability").parent().show()):($(this).find(".reachability-field").show(),$(this).find(".add-reachability").parent().hide())}),$("#"+e).show(expandAnimSpeed,function(){if(t!=0)switch(e){case"address":$("#realty_street").select(),positionImageBox();break;case"apartment-share":$(".select-flatmate-existing").first().select();break;case"livingspace":$("#realty_size").select();break;case"costs":$("#realty_leasing_costs").select();break;case"additional-info":$("#realty_floor").select(),$("#"+e+" input[type=text]").blur();break;case"contacts":$("#realty_contacts_attributes_0_name").select()}validateAll()}),!1}function initUpload(){$(".upload").fileUploadUI({uploadTable:$("#uploaded-files"),buildUploadRow:function(e,t){var n=e[t],r=randomString(32);$("#placeholderid").val(r);if(!$.browser.msie&&(n.type.substring(0,5)!="image"||parseInt(n.size)>2e7))return;fileType=n.name.slice(-3).toLowerCase();if($.browser.msie&&fileType!="jpg"&&fileType!="jpeg"&&fileType!="gif")return;$.browser.msie?filename=n.name.split("\\").pop():filename=n.name,filename.length>20&&(filename=filename.substring(0,40),filename=filename.substr(0,20)+"<br />"+filename.substr(20,37)+"...");var i='<div id="'+r+'" class="image-box-small upload-cancel-temp">';if(!$.browser.msie)return $(i+'<a href="#" class="file_upload_cancel" onclick="return false;">Abbrechen</a>'+'<div class="picture-preloader"></div>'+'<div class="picture-preloader-name">'+filename+"</div>"+"</div>");$("#uploaded-files").append(i+'<div class="picture-preloader"></div>'+'<div class="picture-preloader-name">'+filename+"</div>"+"</div>"),setUploadAreaPos(),setDescriptionPos(),validateAll()},buildDownloadRow:function(){$.post("/../pictures/uploaded",{hashcode:$("#hashcode").val()})}}),$("#signup-check").click(function(){$("#user_name").slideToggle(100),$("#user_name").prev().slideToggle(100),$("#user_password_confirmation").slideToggle(100),$("#user_password_confirmation").prev().slideToggle(100),$("#newsletter").slideToggle(100),$("#newsletter").next().slideToggle(100),$(".accept-terms").slideToggle(100),$(".accept-terms").next().slideToggle(100)})}function setRealtyActiveState(e){$("#realty_active_state").val(e),e=="active"?$("#set-active-text").html('Jetzt <strong>\'Änderungen speichern\'</strong>, um dein Objekt wieder in der öffentlich Suche sichtbar zu machen. — <a onclick="setRealtyActiveStateRollback(\'inactive\'); return false;" href="" class="set-realty-status-link">Doch nicht freigeben</a>'):e=="inactive"&&$("#set-active-text").html('Jetzt <strong>\'Änderungen speichern\'</strong>, um dein Objekt als vergeben zu markieren. — <a onclick="setRealtyActiveStateRollback(\'active\'); return false;" href="" class="set-realty-status-link">Doch freigeben</a>'
)}function setRealtyActiveStateRollback(e){$("#realty_active_state").val(e),e=="active"?$("#set-active-text").html('<strong>Bereits vergeben? </strong> — <a onclick="setRealtyActiveState(\'inactive\'); return false;" href="" class="set-realty-status-link">Dieses Objekt als vergeben markieren</a>'):e=="inactive"&&$("#set-active-text").html('<strong>Vergeben! </strong> — </strong><a onclick="setRealtyActiveState(\'active\'); return false;" href="" class="set-realty-status-link">Markierung aufheben und Objekt wieder freigeben</a>')}function setDescriptionPos(){var e;e=$("#form-upload").height(),$("#description-area").css("margin-top",$("#form-upload").height()+50+"px")}function setUploadAreaPos(){uploadCounter=$("#uploaded-files").children().size(),$.browser.msie&&$.browser.version>=10?$("#image-upload-text").html("<b>Doppelklick</b> auf diese Fläche um Bilder auszuwählen und hochzuladen."):$.browser.msie&&$("#image-upload-text").html("Hier kannst du Bilder auswählen und hochladen."),uploadCounter>0?($(".upload").addClass("upload-area-thin"),$.browser.msie&&$("#image-upload-text").attr("style","margin-top: 5px !important")):($(".upload").removeClass("upload-area-thin"),$.browser.msie&&$("#image-upload-text").attr("style","margin-top: 10px !important")),setDescriptionPos()}function submitForm(){var e=[],t="";$("#submit-all").attr("disabled","disabled");var n=0,r=0,i=0,s=0,o=0;$("#apartment-share").find(".existing select option:selected").each(function(e){switch($(this).text()){case"männlich":n++;break;case"weiblich":r++}}),$("#apartment-share").find(".wanted select option:selected").each(function(e){switch($(this).text()){case"männlich":i++;break;case"weiblich":s++;break;case"männlich oder weiblich":o++}});var u=n+r,a=i+s+o,f="";for(var l=0;l<n;l++)f+="male,";for(var l=0;l<r;l++)f+="female,";$("#realty_apartment_share_existing").val(f.substring(0,f.length-1));var f="";for(var l=0;l<i;l++)f+="male,";for(var l=0;l<s;l++)f+="female,";for(var l=0;l<o;l++)f+="dontcare,";$("#realty_apartment_share_wanted").val(f.substring(0,f.length-1)),$("#realty_rooms").val($("#realty_rooms").val().replace(",",".")),$.each($(".image-box-small"),function(t){e[t]=$(this).attr("id")}),$.each($(".separate-room-size-input"),function(e){e==0?t=$(this).val():t+=","+$(this).val()}),$("#realty_room_sizes").val(t),$("#mandatory-fields-msg").hide(),$.post("/../realties/validate_user_data",{user_name:$("#user_name").val(),user_email:$("#user_email").val(),user_password:$("#user_password").val(),user_password_confirmation:$("#user_password_confirmation").val()},function(t){if(t=="false")return $("#user_password").val(""),$("#user_password_confirmation").val(""),$("#user_password").addClass("error-border"),$("#user_password_confirmation").addClass("error-border"),validateAll(),$("#mandatory-fields-msg").html("Falsche Email-Adresse oder falsches Passwort. Versuche es noch einmal!"),$("#mandatory-fields-msg").show(),$(".save-draft-button").removeAttr("disabled").text("Entwurf speichern"),!1;e.length>0?$.post("/../pictures/set_pictures_order",{pictures:e},function(e){$(".edit_realty").submit(),$("#new_realty").submit()}):($(".edit_realty").submit(),$("#new_realty").submit())})}(function(e){"use strict";var t="undefined",n="function",r,i,s=function(e){var t=0,n=[];this.complete=function(){t+=1,t===n.length+1&&(e(n),t=0,n=[])},this.push=function(e){n.push(e)},this.getList=function(){return n}};r=function(r,i){var o=this,u,a,f=new s(function(e){o.hideProgressBarAll(function(){o.resetProgressBarAll(),typeof o.onCompleteAll===n&&o.onCompleteAll(e)})}),l=function(e){return typeof e.uploadTable===n?e.uploadTable(e):e.uploadTable},c=function(e){return typeof e.downloadTable===n?e.downloadTable(e):e.downloadTable};this.requestHeaders={Accept:"application/json, text/javascript, */*; q=0.01"},this.dropZone=r,this.imageTypes=/^image\/(gif|jpeg|jpg|png)$/,this.previewMaxWidth=this.previewMaxHeight=80,this.previewLoadDelay=0,this.previewAsCanvas=!1,this.previewSelector=".file_upload_preview",this.progressSelector=".file_upload_progress div",this.cancelSelector=".file_upload_cancel",this.cssClassSmall="file_upload_small",this.cssClassLarge="file_upload_large",this.cssClassHighlight="file_upload_highlight",this.dropEffect="highlight",this.uploadTable=this.downloadTable=null,this.buildUploadRow=this.buildDownloadRow=null,this.progressAllNode=null,this.loadImage=function(e,r,i,s,o,u){var a,f,l,c;if(o&&!o.test(e.type))return null;f=function(e){var t=document.createElement("canvas"),r=Math.min((i||e.width)/e.width,(s||e.height)/e.height);return r>1&&(r=1),e.width=parseInt(e.width*r,10),e.height=parseInt(e.height*r,10),u||typeof t.getContext!==n?e:(t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height),t)},a=document.createElement("img"),l=typeof URL!==t?URL:typeof webkitURL!==t?webkitURL:null,l&&typeof l.createObjectURL===n?(a.onload=function(){l.revokeObjectURL(this.src),r(f(a))},a.src=l.createObjectURL(e)):typeof FileReader!==t&&typeof FileReader.prototype.readAsDataURL===n?(a.onload=function(){r(f(a))},c=new FileReader,c.onload=function(e){a.src=e.target.result},c.readAsDataURL(e)):r(null)},this.addNode=function(e,t,r){e&&e.length&&t&&t.length?t.css("display","none").appendTo(e).fadeIn(function(){if(typeof r===n)try{r()}catch(e){throw t.stop(),e}}):typeof r===n&&r()},this.removeNode=function(e,t){e&&e.length?e.fadeOut(function(){e.remove(),setDescriptionPos(),setUploadAreaPos(),validateAll();if(typeof t===n)try{t()}catch(r){throw e.stop(),r}}):typeof t===n&&t()},this.replaceNode=function(e,t,r){if(!t||!t.length)return o.removeNode(e,r);e&&e.length?e.fadeOut(function(){t.css("display","none"),e.replaceWith(t),t.fadeIn(function(){if(typeof r===n)try{r()}catch(i){throw e.stop(),t.stop(),i}})}):typeof r===n&&r()},this.resetProgressBarAll=function(){o.progressbarAll&&o.progressbarAll.progressbar("value",0)},this.hideProgressBarAll=function(t){o.progressbarAll&&!e(l(o)).find(o.progressSelector+":visible:first").length?o.progressbarAll.fadeOut(t):typeof t===n&&t()},this.onAbort=function(e,t,n,r,i){i.removeNode(i.uploadRow,i.hideProgressBarAll)},this.cancelUpload=function(e,t,n,r,i){var s=r.readyState;r.abort(),(typeof s!="number"||s<2)&&i.onAbort(e,t,n,r,i)},this.initProgressBar=function(t,r){return!t||!t.length?null:typeof t.progressbar===n?t.progressbar({value:r}):(t.addClass("progressbar").append(e("<div/>").css("width",r+"%")).progressbar=function(t,n){return this.each(function(){t==="destroy"?e(this).removeClass("progressbar").empty():e(this).children().css("width",n+"%")})},t)},this.destroyProgressBar=function(e){return!e||!e.length?null:e.progressbar("destroy")},this.initUploadProgress=function(e,t){!e.upload&&t.progressbar&&t.progressbar.progressbar("value",100)},this.initUploadProgressAll=function(){o.progressbarAll&&o.progressbarAll.is(":hidden")&&o.progressbarAll.fadeIn()},this.onSend=function(e,t,n,r,i){i.initUploadProgress(r,i)},this.onProgress=function(e,t,n,r,i){i.progressbar&&e.lengthComputable&&i.progressbar.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.onProgressAll=function(e,t){o.progressbarAll&&e.lengthComputable&&o.progressbarAll.progressbar("value",parseInt(e.loaded/e.total*100,10))},this.onLoadAll=function(e){f.complete()},this.initProgressBarAll=function(){o.progressbarAll||(o.progressbarAll=o.initProgressBar(typeof o.progressAllNode===n?o.progressAllNode(o):o.progressAllNode,0))},this.destroyProgressBarAll=function(){o.destroyProgressBar(o.progressbarAll)},this.loadPreviewImage=function(t,n,r){n=n||0,r.uploadRow.find(r.previewSelector).each(function(){var i=e(this),s=t[n];setTimeout(function(){r.loadImage(s,function(t){r.addNode(i,e(t))},r.previewMaxWidth,r.previewMaxHeight,r.imageTypes,!r.previewAsCanvas)},r.previewLoadDelay),n+=1})},this.initUploadRow=function(e,t,r,i,s){var o=s.uploadRow=typeof s.buildUploadRow===n?s.buildUploadRow(t,r,s):null;o&&(s.progressbar=s.initProgressBar(o.find(s.progressSelector),0),o.find(s.cancelSelector).click(function(e){s.cancelUpload(e,t,r,i,s),e.preventDefault()}),s.loadPreviewImage(t,r,s))},this.initUpload=function(e,t,r,i,s,o){s.initUploadRow(e,t,r,i,s),s.addNode(l(s),s.uploadRow,function(){typeof s.beforeSend===n?s.beforeSend(e,t,r,i,s,o):o()}),setDescriptionPos(),setUploadAreaPos(),validateAll(),s.initUploadProgressAll()},this.parseResponse=function(n,r){return typeof n.responseText!==t?e.parseJSON(n.responseText):e.parseJSON(n.contents().text())},this.initDownloadRow=function(e,t,r,i,s){var o,u;try{o=s.response=s.parseResponse(i,s)}catch(a){if(typeof s.onError!==n)throw a;s.originalEvent=e,s.onError(a,t,r,i,s)}u=s.downloadRow=typeof s.buildDownloadRow===n?s.buildDownloadRow(o,s):null},this.onLoad=function(e,t,r,i,s){var o=l(s),u=c(s),a=function(){typeof s.onComplete===n&&s.onComplete(e,t,r,i,s),f.complete()};f.push(Array.prototype.slice.call(arguments,1)),s.initDownloadRow(e,t,r,i,s),(!(o&&s.uploadRow&&s.uploadRow.length)||!!u&&o.get(0)!==u.get(0))&&s.removeNode(s.uploadRow,function(){s.addNode(u,s.downloadRow,a)})},this.dropZoneEnlarge=function(){a||(typeof o.dropZone.switchClass===n?o.dropZone.switchClass(o.cssClassSmall,o.cssClassLarge):(o.dropZone.addClass(o.cssClassLarge),o.dropZone.removeClass(o.cssClassSmall)),a=!0)},this.dropZoneReduce=function(){typeof o.dropZone.switchClass===n?o.dropZone.switchClass(o.cssClassLarge,o.cssClassSmall):(o.dropZone.addClass(o.cssClassSmall),o.dropZone.removeClass(o.cssClassLarge)),a=!1},this.onDocumentDragEnter=function(e){o.dropZoneEnlarge()},this.onDocumentDragOver=function(e){u&&clearTimeout(u),u=setTimeout(function(){o.dropZoneReduce()},200)},this.onDragEnter=this.onDragLeave=function(e){o.dropZone.toggleClass(o.cssClassHighlight)},this.onDrop=function(e){u&&clearTimeout(u),o.dropEffect&&typeof o.dropZone.effect===n?o.dropZone.effect(o.dropEffect,function(){o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce()}):(o.dropZone.removeClass(o.cssClassHighlight),o.dropZoneReduce())},this.init=function(){o.initProgressBarAll(),typeof o.initExtended===n&&o.initExtended()},this.destroy=function(){typeof o.destroyExtended===n&&o.destroyExtended(),o.destroyProgressBarAll()},e.extend(this,i)},i={init:function(t){return this.each(function(){e(this).fileUpload(new r(e(this),t))})},option:function(n,r,i){return!n||typeof n=="string"&&typeof r===t?e(this).fileUpload("option",n,r,i):this.each(function(){e(this).fileUpload("option",n,r,i)})},destroy:function(t){return this.each(function(){e(this).fileUpload("destroy",t)})},upload:function(t,n){return this.each(function(){e(this).fileUpload("upload",t,n)})}},e.fn.fileUploadUI=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error('Method "'+t+'" does not exist on jQuery.fileUploadUI')}})(jQuery),function(e){"use strict";var t="file_upload",n="undefined",r="function",i,s,o=function(e,t){var n=0,r=[];t&&(t.length?r=t:r[t-1]=null),this.complete=function(){n+=1,n===r.length&&(e(r),n=0,r=[])},this.push=function(e){r.push(e)},this.getList=function(){return r}},u=function(){var e=[];this.push=function(t){e.push(t),e.length===1&&t()},this.next=function(){e.shift(),e.length&&e[0]()}};i=function(i){var s=this,a,f,l={namespace:t,uploadFormFilter:function(e){return!0},fileInputFilter:function(e){return!0},cssClass:t,dragDropSupport:!0,dropZone:i,url:function(e){return e.attr("action")},method:function(e){return e.attr("method")},fieldName:function(e){return e.attr("name")},formData:function(e){return e.serializeArray()},requestHeaders:null,multipart:!0,multiFileRequest:!1,withCredentials:!1,forceIframeUpload:!1,sequentialUploads:!1,maxChunkSize:null,maxFileReaderSize:5e7,replaceFileInput:!0},c={},h={},p=/^http(s)?:\/\//,d,v=new o(function(e){typeof l.onLoadAll===r&&l.onLoadAll(e)}),m=new u,g=function(){v.complete(),m.next()},y=function(){return typeof XMLHttpRequest!==n&&typeof XMLHttpRequestUpload!==n&&typeof File!==n&&(!l.multipart||typeof FormData!==n||typeof FileReader!==n&&typeof XMLHttpRequest.prototype.sendAsBinary===r)},b=function(){l.dragDropSupport&&(typeof l.onDocumentDragEnter===r&&(c["dragenter."+l.namespace]=function(e){l.onDocumentDragEnter(e)}),typeof l.onDocumentDragLeave===r&&(c["dragleave."+l.namespace]=function(e){l.onDocumentDragLeave(e)}),c["dragover."+l.namespace]=s.onDocumentDragOver,c["drop."+l.namespace]=s.onDocumentDrop,e(document).bind(c),typeof l.onDragEnter===r&&(h["dragenter."+l.namespace]=function(e){l.onDragEnter(e)}),typeof l.onDragLeave===r&&(h["dragleave."+l.namespace]=function(e){l.onDragLeave(e)}),h["dragover."+l.namespace]=s.onDragOver,h["drop."+l.namespace]=s.onDrop,l.dropZone.bind(h)),f.bind("change."+l.namespace,s.onChange)},w=function(){e.each(c,function(t,n){e(document).unbind(t,n)}),e.each(h,function(e,t){l.dropZone.unbind(e,t)}),f.unbind("change."+l.namespace)},E=function(e){return typeof e.uploadedBytes!==n},S=function(e,t,i){var s;return s={lengthComputable:!0,loaded:t,total:i},s},x=function(e,t,r){var i,s;if(typeof r.progressTotal===n)if(e[t])s=e[t].size,r.progressTotal=s?s:1;else{s=0;for(i=0;i<e.length;i+=1)s+=e[i].size;r.progressTotal=s}return r.progressTotal},T=function(t,n,i,s,o){var u,a,f=0,l=0;t.lengthComputable&&typeof o.onProgressAll===r&&(o.progressLoaded=parseInt(t.loaded/t.total*x(n,i,o),10),a=v.getList(),e.each(a,function(e,t){f+=t[3].progressLoaded||0,l+=x(t[0],t[1],t[3])}),u=S(!0,f,l),o.onProgressAll(u,a))},N=function(e,t,n,i,s){var o;if(E(s)){s.uploadedBytes+=s.chunkSize,o=S(!0,s.uploadedBytes,t[n].size),typeof s.onProgress===r&&s.onProgress(o,t,n,i,s),T(o,t,n,i,s);if(s.uploadedBytes<t[n].size){typeof s.resumeUpload===r?s.resumeUpload(e,t,n,i,s,function(){q(e,t,n,i,s,!0)}):q(e,t,n,i,s,!0);return}}s.progressLoaded=x(t,n,s),typeof s.onLoad===r&&s.onLoad(e,t,n,i,s),g()},C=function(e,t,n,i,s){var o=e;E(s)&&e.lengthComputable&&(o=S(!0,s.uploadedBytes+parseInt(e.loaded/e.total*s.chunkSize,10),t[n].size)),typeof s.onProgress===r&&s.onProgress(o,t,n,i,s),T(o,t,n,i,s)},k=function(e,t,n,i){n.upload&&(n.upload.onprogress=function(r){C(r,e,t,n,i)}),n.onload=function(r){N(r,e,t,n,i)},n.onabort=function(s){i.progressTotal=i.progressLoaded,typeof i.onAbort===r&&i.onAbort(s,e,t,n,i),g()},n.onerror=function(s){i.progressTotal=i.progressLoaded,typeof i.onError===r&&i.onError(s,e,t,n,i),g()}},L=function(e){return typeof e.url===r?e.url(e.uploadForm||a):e.url},A=function(e){return typeof e.method===r?e.method(e.uploadForm||a):e.method},O=function(e){return typeof e.fieldName===r?e.fieldName(e.fileInput||f):e.fieldName},M=function(t){e(".upload-cancel-temp").each(function(){return e("#placeholderid").val(e(this).attr("id")),e(this).removeClass("upload-cancel-temp"),!1});var n;return typeof t.formData===r?t.formData(t.uploadForm||a):e.isArray(t.formData)?t.formData:t.formData?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_=function(t){if(p.test(t)){var n=location.host,r=location.protocol.length+2,i=t.indexOf(n,r),s=i+n.length;return i!==r&&i!==t.indexOf("@",r)+1||t.length!==s&&e.inArray(t.charAt(s),["/","?","#"])===-1?!1:!0}return!0},D=function(t,n,r,i){var s=t[n],o=L(i),u=_(o);r.open(A(i),o,!0);if(u){r.setRequestHeader("X-Requested-With","XMLHttpRequest");if(!i.multipart||E(i))r.setRequestHeader("X-File-Name",s.name),r.setRequestHeader("X-File-Type",s.type),r.setRequestHeader("X-File-Size",s.size),E(i)?i.multipart||r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type",s.type)}else i.withCredentials&&(r.withCredentials=!0);e.isArray(i.requestHeaders)?e.each(i.requestHeaders,function(e,t){r.setRequestHeader(t.name,t.value)}):i.requestHeaders&&e.each(i.requestHeaders,function(e,t){r.setRequestHeader(e,t)})},P=function(t,n,r){var i=new FormData,s;e.each(M(r),function(e,t){i.append(t.name,t.value)});for(s=0;s<t.length;s+=1)i.append(O(r),t[s]);n.send(i)},H=function(e,t){e.reader=new FileReader,e.reader.onload=t,e.reader.readAsBinaryString(e)},B=function(e){return unescape(encodeURIComponent(e))},j=function(t,n,r,i){var s="--",o="\r\n",u="",a=[];return e.each(i,function(e,n){u+=s+t+o+'Content-Disposition: form-data; name="'+B(n.name)+'"'+o+o+B(n.value)+o}),e.each(n,function(e,n){u+=s+t+o+'Content-Disposition: form-data; name="'+B(r)+'"; filename="'+B(n.name)+'"'+o+"Content-Type: "+B(n.type)+o+o,a.push(u),a.push(n.reader.result),delete n.reader,u=o}),u+=s+t+s+o,a.push(u),a.join("")},F=function(e,t,n){var r="----MultiPartFormBoundary"+(new Date).getTime(),i,s;t.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),i=new o(function(){t.sendAsBinary(j(r,e,O(),M(n)))},e.length);for(s=0;s<e.length;s+=1)H(e[s],i.complete)},I=function(e,t){var n,i=t.uploadedBytes,s=t.maxChunkSize;return e&&typeof e.slice===r&&(i||s&&s<e.size)?(t.uploadedBytes=i=i||0,n=e.slice(i,s||e.size-i),t.chunkSize=n.size,n):e},q=function(t,i,s,o,u,a){var f;f=function(){if(!a&&typeof u.onSend===r&&u.onSend(t,i,s,o,u)===!1){g();return}var f=I(i[s],u),l;k(i,s,o,u),D(i,s,o,u),u.multipart?(l=typeof s=="number"?[f]:i,typeof FormData!==n?P(l,o,u):typeof FileReader!==n&&typeof o.sendAsBinary===r?F(l,o,u):e.error("Browser does not support multipart/form-data XHR file uploads")):o.upload?o.send(f):e.error("Browser does not support XHR file uploads")};if(!a){v.push(Array.prototype.slice.call(arguments,1));if(u.sequentialUploads){m.push(f);return}}f()},R=function(t,n,i,s,o){var u=new XMLHttpRequest,a=e.extend({},l);a.fileInput=i,a.uploadForm=s,typeof a.initUpload===r?a.initUpload(t,n,o,u,a,function(){q(t,n,o,u,a)}):q(t,n,o,u,a)},U=function(t,r,i,s,o){var u=0,a;typeof i===n?e.each(r,function(e,t){u+=t.size?t.size:1}):u=r[i].size?r[i].size:1,a=S(!0,u,u),o.progressLoaded=u,T(a,r,i,s,o)},z=function(t,n,r){var i=M(r);n.find(":input").not(":disabled").attr("disabled",!0).addClass(r.namespace+"_disabled"),e.each(i,function(t,i){e('<input type="hidden"/>').attr("name",i.name).val(i.value).addClass(r.namespace+"_form_data").appendTo(n)}),t.attr("name",O(r)).appendTo(n)},W=function(e,t,n){e.detach(),t.find("."+n.namespace+"_disabled").removeAttr("disabled").removeClass(n.namespace+"_disabled"),t.find("."+n.namespace+"_form_data").remove()},X=function(t,n,i,s,o,u,a){var f;f=function(){if(typeof u.onSend===r&&u.onSend(t,n,a,o,u)===!1){g();return}var f={action:s.attr("action"),method:s.attr("method"),target:s.attr("target"),enctype:s.attr("enctype")};o.unbind("abort").bind("abort",function(e){o.readyState=0,o.unbind("load").attr("src","javascript".concat(":false;")),U(e,n,a,o,u),typeof u.onAbort===r&&u.onAbort(e,n,a,o,u),g()}).unbind("load").bind("load",function(t){o.readyState=4,U(t,n,a,o,u),typeof u.onLoad===r&&u.onLoad(t,n,a,o,u),e('<iframe src="javascript:false;" style="display:none;"></iframe>').appendTo(s).remove(),g()}),s.attr("action",L(u)).attr("method",A(u)).attr("target",o.attr("name")).attr("enctype","multipart/form-data"),z(i,s,u),o.readyState=2,s.get(0).submit(),W(i,s,u),e.each(f,function(e,t){t?s.attr(e,t):s.removeAttr(e)})},v.push([n,a,o,u]),u.sequentialUploads?m.push(f):f()},V=function(e,t){typeof t.name===n&&typeof t.size===n&&(t.name=t.fileName,t.size=t.fileSize)},J=function(t,n,i,s){if(!(t&&n&&i)){e.error("Iframe based File Upload requires a file input change event");return}var o=e('<iframe src="javascript:false;" style="display:none;" name="iframe_'+l.namespace+"_"+(new Date).getTime()+'"></iframe>'),u=e.extend({},l),a=t.target&&t.target.files;a=a?Array.prototype.slice.call(a,0):[{name:n.val(),type:null,size:null}],e.each(a,V),s=a.length===1?0:s,u.fileInput=n,u.uploadForm=i,o.readyState=0,o.abort=function(){o.trigger("abort")},o.bind("load",function(){o.unbind("load"),typeof u.initUpload===r?u.initUpload(t,a,s,o,u,function(){X(t,a,n,i,o,u,s)}):X(t,a,n,i,o,u,s)}).appendTo(i)},K=function(e){var t=0,r=0,i;if(l.multipart&&typeof FormData===n){for(i=0;i<e.length;i+=1){t=e[i].size;if(t>l.maxFileReaderSize)return!1;r+=t}if(l.multiFileRequest&&r>l.maxFileReaderSize)return!1}return!0},Q=function(t,n,r,i){if(!K(n)){J(t,r,i);return}var s;n=Array.prototype.slice.call(n,0),e.each(n,V);if(l.multiFileRequest&&l.multipart&&n.length)R(t,n,r,i);else for(s=0;s<n.length;s+=1)R(t,n,r,i,s)},G=function(){a=(i.is("form")?i:i.find("form")).filter(l.uploadFormFilter)},Y=function(){f=(a.length?a:i).find("input:file").filter(l.fileInputFilter)},Z=function(t){var n=t.clone(!0);e("<form/>").append(n).get(0).reset(),t.after(n).detach(),Y()};this.onDocumentDragOver=function(e){if(typeof l.onDocumentDragOver===r&&l.onDocumentDragOver(e)===!1)return!1;e.preventDefault()},this.onDocumentDrop=function(e){if(typeof l.onDocumentDrop===r&&l.onDocumentDrop(e)===!1)return!1;e.preventDefault()},this.onDragOver=function(e){if(typeof l.onDragOver===r&&l.onDragOver(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&(t.dropEffect=t.effectAllowed="copy",e.preventDefault())},this.onDrop=function(e){if(typeof l.onDrop===r&&l.onDrop(e)===!1)return!1;var t=e.originalEvent.dataTransfer;t&&t.files&&y()&&Q(e,t.files),e.preventDefault()},this.onChange=function(n){if(typeof l.onChange===r&&l.onChange(n)===!1)return!1;var i=e(n.target),s=e(n.target.form);s.length===1?l.replaceFileInput&&(i.data(t+"_form",s),Z(i)):s=i.data(t+"_form"),!l.forceIframeUpload&&n.target.files&&y()?Q(n,n.target.files,i,s):J(n,i,s)},this.init=function(t){t&&(e.extend(l,t),d=t),G(),Y();if(i.data(l.namespace)){e.error('FileUpload with namespace "'+l.namespace+'" already assigned to this element');return}i.data(l.namespace,s).addClass(l.cssClass),l.dropZone.not(i).addClass(l.cssClass),b(),typeof l.init===r&&l.init()},this.options=function(t){var r,s,o,u;if(typeof t===n)return e.extend({},l);d&&e.extend(d,t),w(),e.each(t,function(t,n){switch(t){case"namespace":e.error("The FileUpload namespace cannot be updated.");return;case"uploadFormFilter":o=!0,u=!0;break;case"fileInputFilter":u=!0;break;case"cssClass":r=l.cssClass;break;case"dropZone":s=l.dropZone}l[t]=n}),o&&G(),u&&Y(),typeof r!==n?(i.removeClass(r).addClass(l.cssClass),(s?s:l.dropZone).not(i).removeClass(r),l.dropZone.not(i).addClass(l.cssClass)):s&&(s.not(i).removeClass(l.cssClass),l.dropZone.not(i).addClass(l.cssClass)),b()},this.option=function(e,t){var r;if(typeof t===n)return l[e];r={},r[e]=t,s.options(r)},this.destroy=function(){typeof l.destroy===r&&l.destroy(),w(),i.removeData(l.namespace).removeClass(l.cssClass),l.dropZone.not(i).removeClass(l.cssClass)},this.upload=function(e){typeof e.length===n&&(e=[e]),Q(null,e)}},s={init:function(t){return this.each(function(){(new i(e(this))).init(t)})},option:function(r,i,s){s=s?s:t;var o=e(this).data(s);if(o){if(!r)return o.options();if(typeof r=="string"&&typeof i===n)return o.option(r)}else e.error('No FileUpload with namespace "'+s+'" assigned to this element');return this.each(function(){var t=e(this).data(s);t?typeof r=="string"?t.option(r,i):t.options(r):e.error('No FileUpload with namespace "'+s+'" assigned to this element')})},destroy:function(n){return n=n?n:t,this.each(function(){var t=e(this).data(n);t?t.destroy():e.error('No FileUpload with namespace "'+n+'" assigned to this element')})},upload:function(n,r){return r=r?r:t,this.each(function(){var t=e(this).data(r);t?t.upload(n):e.error('No FileUpload with namespace "'+r+'" assigned to this element')})}},e.fn.fileUpload=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return s.init.apply(this,arguments);e.error('Method "'+t+'" does not exist on jQuery.fileUpload')}}(jQuery);var validatePostalcode=/^[\d]{4,5}$/,validatePostalcodeCharacters=/[^\d]+/g,validateSize=/^[\d]{1,7}$/,validateSizeCharacters=/[^\d]+/g,validateNumberOfParkingPlaces=/^[\d]{1,3}$/,validateNumberOfParkingPlaceCharacters=/[^\d]+/g,validateCosts=/^[\d]{1,9}$/,validateCostCharacters=/[^\d]+/g,validateRooms=/^[\d]{1,3}$/,validateRoomCharacters=/[^\d]+/g,validateFloor=/^[\d]{1,3}$/,validateFloorCharacters=/[^\d]+/g,validateYearOfConstruction=/^[\d]{4}$/,validateYearOfConstructionCharacters=/[^\d]+/g,validateNumberOfBathrooms=/^[\d]{1,2}$/,validateNumberOfBathroomsCharacters=/[^\d]+/g,validateContactEmail=/^[A-Za-z\d._\-]+@[A-Za-z\d._\-]+\.[A-Za-z]{2,4}$/,validateContactEmailCharacters=/[^A-Za-z\d._\-@]+/g,validateContactPhone=/^[\d\s\-\/\+\(\)]{1,50}$/,validateContactPhoneCharacters=/[^\d\s\-\/\+\(\)]+/g,message="";jQuery.fn.ForceValidation=function(e,t){return this.each(function(){$(this).attr("maxlength",t),$(this).keyup(function(n){var r=$(this).caret().start-1;temp=$(this).val().replace(e,"").substr(0,t),temp.length!=$(this).val().length&&($(this).val(temp),$(this).caret(r,r));switch($(this).attr("id")){case"realty_street":validateBorderStreet($(this),!1);break;case"realty_title":validateBorderTitle($(this),!1);break;case"realty_postalcode":validateBorderPostalcode($(this),!1);break;case"realty_city":validateBorderCity($(this),!1);break;case"realty_size":validateBorderSize($(this),!1);break;case"realty_leasing_costs":validateBorderLeasingCosts($(this),!1);break;case"realty_year_of_construction":validateBorderYearOfConstruction($(this),!1);break;case"realty_contacts_attributes_0_email":validateBorderContactEmail($(this),!1);break;case"user_email":validateBorderUserEmail($(this),!1);break;case"user_password":validateBorderUserPassword($(this),!1);break;case"user_password_confirmation":validateBorderUserPasswordConfirmation($(this),!1)}$(this).hasClass("contact-name")&&validateBorderContactName($(this),!1)}),$(this).bind("paste",function(n){var r=$(this);setTimeout(function(){var n=$(r).val().replace(e,"").substr(0,t);$(r).val(n),validateAddress()?$("#submit-address").removeAttr("disabled"):$("#submit-address").attr("disabled","disabled"),validateLivingspace()?$("#submit-livingspace").removeAttr("disabled"):$("#submit-livingspace").attr("disabled","disabled"),validateAllCosts()?$("#submit-costs").removeAttr("disabled"):$("#submit-costs").attr("disabled","disabled"),validateAdditionalInfo()?$("#submit-additional-info").removeAttr("disabled"):$("#submit-additional-info").attr("disabled","disabled"),validateContacts()?$("#submit-contacts").removeAttr("disabled"):$("#submit-contacts").attr("disabled","disabled"),validateAll()},100)})})},jQuery.fn.ForceValidationForDescription=function(){return this.each(function(){var e=$(this);$(this).keyup(function(e){validateAll()})})},$(document).ready(function(){$("#realty_street").ForceValidation("",100),$("#realty_street").blur(function(e){validateBorderStreet($(this),!0)}),$("#realty_postalcode").ForceValidation(validatePostalcodeCharacters,5),$("#realty_postalcode").blur(function(e){validateBorderPostalcode($(this),!0)}),$("#realty_city").ForceValidation("",50),$("#realty_city").blur(function(e){validateBorderCity($(this),!0)}),$("#realty_title").ForceValidation("",200),$("#realty_title").blur(function(e){validateBorderTitle($(this),!0)}),$("#realty_size").ForceValidation(validateSizeCharacters,7),$("#realty_size").blur(function(e){validateBorderSize($(this),!0)}),$(".separate-room-size-input").ForceValidation(validateSizeCharacters,3),$("#realty_number_parking_places").ForceValidation(validateNumberOfParkingPlaceCharacters,3),$("#realty_leasing_costs").ForceValidation(validateCostCharacters,9),$("#realty_leasing_costs").blur(function(e){validateBorderLeasingCosts($(this),!0)}),$("#realty_operation_costs").ForceValidation(validateCostCharacters,9),$("#realty_leasing_costs_max").ForceValidation(validateCostCharacters,9),$("#realty_transfer_costs").ForceValidation(validateCostCharacters,9),$("#realty_deposit_costs").ForceValidation(validateCostCharacters,9),$("#realty_cooperative_flat_costs").ForceValidation(validateCostCharacters,9),$("#realty_additional_costs").ForceValidation(validateCostCharacters,9),$("#realty_floor").ForceValidation(validateFloorCharacters,3),$("#realty_year_of_construction").ForceValidation(validateYearOfConstructionCharacters,4),$("#realty_year_of_construction").blur(function(e){validateBorderYearOfConstruction($(this),!0)}),$("#realty_number_bathrooms").ForceValidation(validateNumberOfBathroomsCharacters,2),$("#description").attr("maxlength",8e3),$("#description").ForceValidationForDescription(),$("#user_email").ForceValidation(validateContactEmailCharacters,50),$("#user_email").blur(function(e){validateBorderUserEmail($(this),!0)}),$("#user_password").ForceValidation("",128),$("#user_password").blur(function(e){validateBorderUserPassword($(this),!0)}),$("#user_password_confirmation").ForceValidation("",128),$("#user_password_confirmation").blur(function(e){validateBorderUserPasswordConfirmation($(this),!0)}),initContactValidation()});var animationSpeed=150,clientCountryShort,clientCountryLong,autocompleteService;$(document).ready(function(){function e(){$(".pac-container").css("left",$("#realty_street").offset().left+"px");var e;$("#autocomplete-checkbox").is(":checked")?e={input:document.getElementById("realty_street").value,types:["address"]}:e={input:document.getElementById("realty_street").value,types:["address"],componentRestrictions:{country:clientCountryShort}},autocompleteService.getPlacePredictions(e,function(e,t){t==google.maps.places.PlacesServiceStatus.OK?$(".pac-container").show():$(".pac-container").hide(),$(".pac-item").remove(),$("#searchbox-error-message").remove(),e==null&&($("#autocomplete-checkbox").is(":checked")?$(".pac-container").prepend('<div id="searchbox-error-message">Dieser Ort konnte nicht gefunden werden.</div>'):$(".pac-container").prepend('<div id="searchbox-error-message">Dieser Ort konnte in '+clientCountryLong+" nicht gefunden werden.</div>"));if(e==null){$(".pac-container").show();return}$("#search-select").removeClass("not-found");for(var n=0,r;r=e[n];n++){stringBuilder=r.description;for(var i=0;i<r.matched_substrings.length;i++)offset=r.matched_substrings[i].offset,length=r.matched_substrings[i].length,stringBuilder=stringBuilder.substring(0,offset+i*7)+"<b>"+stringBuilder.substring(offset+i*7,offset+length+i*7)+"</b>"+stringBuilder.substring(offset+length+i*7,stringBuilder.length+i*7);$('<div class="pac-item">'+stringBuilder+"</div>").insertBefore("#google-autocomplete-ext")}})}function t(){var e=new google.maps.Geocoder;e.geocode({address:document.getElementById("realty_street").value},function(e,t){t==google.maps.GeocoderStatus.OK&&($.each(e[0].address_components,function(e,t){t.types[0]=="route"&&($("#realty_street").val(t.long_name),setTimeout(function(){$("#realty_street").prev().hide()},1)),t.types[0]=="postal_code"&&($("#realty_postalcode").val(t.long_name),setTimeout(function(){$("#realty_postalcode").prev().hide()},1)),t.types[0]=="locality"&&($("#realty_city").val(t.long_name),setTimeout(function(){$("#realty_city").prev().hide()},1))}),$.each(e[0].address_components,function(e,t){t.types[0]=="street_number"&&$("#realty_street").val($("#realty_street").val()+" "+t.long_name)}),$("#realty_postalcode").trigger("keyup"))}),validateAddress()}formHasChanged=!1,window.onbeforeunload=function(){if(formHasChanged)return"Willst du die Änderungen wirklich verwerfen?"},$("#new_realty, .edit_realty").find("input[type=text], textarea").keyup(function(){formHasChanged=!0}),$("#new_realty, .edit_realty").find("select, input[type=checkbox], input[type=radio]").change(function(){formHasChanged=!0}),$(".save-draft-button, .submit-btn, .middle-text a").click(function(){formHasChanged=!1}),autocompleteService=new google.maps.places.AutocompleteService,$("#autocomplete-checkbox").click(function(){$("#autocomplete-checkbox").is(":checked")?($("#autocomplete-checkbox-label").parent().addClass("selected"),$(this).val("true")):($("#autocomplete-checkbox-label").parent().removeClass("selected"),$(this).val("false")),e()}),$(".pac-item").live("click",function(){$("#realty_street").val($(this).text()),$(".pac-container").hide(),$(".pac-item").removeClass("pac-selected"),t()}),$("body").mouseup(function(e){target=e.target,!$(target).hasClass("pac-container")&&$(target).attr("id")!="searchTextField"&&$(target).parents(".pac-container").length==0&&($(".pac-item").removeClass("pac-selected"),$(".pac-container").hide())}),$("#realty_street").keydown(function(e){$(".pac-container").css("left",$("#realty_street").offset().left+"px"),e.which==13?(e.preventDefault(),$(".pac-selected").length==1&&$(".pac-container").is(":visible")?$("#realty_street").val($(".pac-selected").text()):$("#realty_street").val()!=""?$(".pac-item").length!=0&&$("#realty_street").val($(".pac-item:first").text()):($("#search_mode").val(""),$("#search_data").val("")),$(".pac-container").hide(),$(".pac-item").removeClass("pac-selected"),t()):e.which==38&&$(".pac-container").is(":visible")?$(".pac-selected").length==0?$(".pac-item:last").addClass("pac-selected"):$(".pac-item:first").hasClass("pac-selected")?($(".pac-item:last").addClass("pac-selected"),$(".pac-item:first").
removeClass("pac-selected")):($(".pac-selected").prev().addClass("pac-selected"),$(".pac-selected:last").removeClass("pac-selected")):e.which==40&&$(".pac-container").is(":visible")&&($(".pac-selected").length==0?$(".pac-item:first").addClass("pac-selected"):$(".pac-item:last").hasClass("pac-selected")?($(".pac-item:first").addClass("pac-selected"),$(".pac-item:last").removeClass("pac-selected")):($(".pac-selected").next().addClass("pac-selected"),$(".pac-selected:first").removeClass("pac-selected"))),$("#realty_street").val()==""&&$(".pac-container").hide()}),$("#realty_street").keyup(function(t){$("#realty_street").val()==""?$(".pac-container").hide():t.which!=13&&t.which!=38&&t.which!=40&&e()}),$("#realty_street").focus(function(e){$(".pac-item").length>0&&$("#realty_street").val()!=""&&$(".pac-container").show()}),$(window).resize(function(){$(".pac-container").css("left",$("#realty_street").offset().left+"px")}),$(".placeholder-address").jLabel({yShift:7}),$(".placeholder-contacts").jLabel({yShift:20}),setUploadAreaPos(),$("#uploaded-files").sortable(),$("#uploaded-files").disableSelection(),setDescriptionPos(),setContacts(),changeFloorType(),$(".delete-contact:eq(0)").remove(),$("#select-realty-type").keydown(function(e){e.which==13&&(e.preventDefault(),previewRealtyType())}),$("#address").keydown(function(e){e.which==13&&(e.preventDefault(),previewAddress())}),$("#address").keyup(function(e){validateAddress(),validateAll()}),$("#realty_title").keyup(function(e){validateTitle(),validateAll()}),$("#livingspace").keypress(function(e){e.which==13&&(e.preventDefault(),previewLivingspace())}),$("#livingspace").keyup(function(e){validateLivingspace(),validateAll()}),$("#costs").keypress(function(e){e.which==13&&(e.preventDefault(),previewCosts())}),$("#costs").keyup(function(e){validateAllCosts(),validateAll()}),$("#additional-info").keypress(function(e){e.which==13&&(e.preventDefault(),previewAdditionalInfo())}),$("#additional-info").keyup(function(e){validateAdditionalInfo(),validateAll()}),$("#apartment-share").keypress(function(e){e.which==13&&(e.preventDefault(),previewApartmentShare())}),$("#apartment-share").keyup(function(e){validateApartmentShare(),validateAll()}),$("#contacts").keypress(function(e){e.which==13&&(e.preventDefault(),previewContacts())}),$("#contacts").keyup(function(e){validateContacts(),validateAll()}),$("#signup-check").click(function(e){validateSignupArea(),validateAll()}),$("#signup-area").keyup(function(e){validateSignupArea(),validateAll()})}),$(window).load(function(){initUpload(),positionImageBox(),setDescriptionPos()}),$(window).resize(function(){positionImageBox(),setDescriptionPos()}),$("#form-upload").resize(function(){positionImageBox(),setDescriptionPos()}),$(document).ready(function(){$("input.realty-title").keyup(function(e){empty_css="border: 1px solid red !important",filled_css="border: 1px solid #0e8ac5 !important",$(this).attr("style",$(this).val()==""?empty_css:filled_css)})}),$(document).ready(function(){$(".radio-btn-wrap input:radio").click(function(){$(this).attr("id")=="realty_condition_beziehbar_ab"?($("#realty_ready_for_occupancy_month").show(),$("#realty_ready_for_occupancy_month").focus()):$("#realty_ready_for_occupancy_month").hide()})});